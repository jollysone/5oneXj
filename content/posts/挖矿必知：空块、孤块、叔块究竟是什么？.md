---
title: "挖矿必知：空块、孤块、叔块究竟是什么？"
slug: what-is-blockchain-empty-solitary-uncle-block
date: 2018-04-05
draft: false
author: "5oneXj"

categories: ["基础知识"]
tags: ["基础知识", "区块链"]
---

{{< admonition quote "引言" >}}

在加密货币挖矿中，我们会在矿池的统计中经常看到孤块率这一词。`空块`、`孤块`、`叔块`的存在，而这些不同于常规区块的爆块也将一定程度上影响到矿工的收入。

{{< /admonition >}}

## 空块

在区块链中，`一个空块是指在一个新的区块产生时没有包含任何交易的区块`。通常情况下，每个区块都包含多个交易，这些交易记录了在该区块产生之前发生的各种交易，例如转账、合约执行等。但是，在某些情况下，网络可能会出现暂时性的交易瓶颈或其他问题，导致在新区块产生时没有任何交易需要被打包。

`空块通常是由矿工产生的`，他们会竞争地解决区块链网络中的谜题，以获得一定数量的加密货币作为奖励。如果交易数量较少或者网络拥堵，矿工在解决谜题后可能会决定在新的区块中不包含任何交易，这样可以更快地产生新的区块，并获得更多的奖励。

尽管空块并不常见，但是它们可能会对区块链的可扩展性和性能产生一些影响，因为它们没有有效地利用区块的容量。一些区块链协议已经采取了一些措施来减少空块的产生，例如调整区块大小和手续费结构，以鼓励矿工包含更多的交易。

![空块](https://raw.githubusercontent.com/jollysone/Picture-Library/master/blog/202303101707320.png)

## 孤块

在区块链中，孤块（Orphan Block）是指由于网络问题或者矿工的竞争问题导致的一个无效区块，该区块无法被其他节点接受和确认。

在区块链网络中，由于区块在网络中传输和广播是需要一定的时间，如果两个矿工几乎同时发现了同样高度的块，那么就会出现竞争关系。最终稍微晚一点诞生的区块虽然也是正常运算产生的，但由于“最长链”原则，这个稍晚一些的区块将无法成为主链的一部分，在比特币网络中，我们把这些挖得稍晚的区块叫“孤块”，是需要完全抛弃掉的，挖到孤块的矿工也无法得到相应的区块奖励。

> `在比特币中，孤块没有意义`，随后将被抛弃，发现这个孤块的矿工也拿不到采矿相关的奖励。

## 叔块

在以太坊中，也有“孤块”这一现象的出现。但是由于以太坊的出块时间比较短，为了防止矿池算力过大控制挖矿过程，同时避免算力的浪费，如果主链中的区块愿意接受这些稍晚产生的“孤块”，那么它就可以成为叔块，被包容进接受它的主链区块中，而这部分挖出叔块的矿工也能获得相应的叔块奖励。

`叔块机制的目的是为了更好地保护以太坊网络的安全`。相较于比特币，以太坊的出块时间要短很多，这样很有可能会出现临时分叉，在这种情况下，孤块的大量存在会容易导致以太坊的主链可能不是“最重”的那条链，最终影响到主链的安全性，因此加入将“孤块”变成“叔块”的机制其实是一种更安全的行为。

这些挖出了包容叔块的区块的矿工能够获得相应的叔块引用奖励，大约为1/32的基础挖矿奖励。当然叔块的产生也会有一些限制，叔块必须是区块的前2层-7层的区块的直接子块，并且随着间隔越大，叔块奖励会越少，比如是前2层区块的子块也就是间隔1层可以获得7/8的挖矿基础奖励，间隔两层可以获得6/8，以此类推。

### 最重的链(heaviest)

Ethereum的GHOST协议，不认为孤块没有价值，而是会给与发现孤块的矿工以回报。在以太坊中，孤块被称为“叔块”(uncle block)，它们可以为主链的安全作出贡献。

相对来说，比特币有很长的块间隔时间。在比特币区块中，平均约10分钟可以得到一个确认(也就是发现一个新的后续区块)。但是自从比特币成立以来，大量关于块链技术的研究已经发展起来。这些研究表明，更短的块间隔确实是可能的，而且在很多应用场景下是需要的。然而，随着拥有更快的出块速度，孤块的增加而带来的昂贵的成本和浪费也随之增加。

GHOST协议支付报酬给叔块，这激励了矿工在新发现的块中去引用叔块。引用叔块使主链更重。`在比特币，最长的链是主链。` `在以太坊中，主链是指最重的链。`

### 叔块的好处

1. 以太坊十几秒的出块间隔，大大增加了孤块的产生，并且降低了安全性。通过鼓励引用叔块，使引用主链获得更多的安全保证(因为孤块本身也是合法的)
2. 比特币中，采矿中心化(大量的集中矿池)成为一个问题。给与叔块报酬，可以一定程度上缓解这个问题。

### 叔块的引用

1. 区块可以不引用，或者最多引用两个叔块
2. 叔块必须是区块的前2层~前7层的祖先的直接的子块
3. 被引用过的叔块不能重复引用
4. 引用叔块的区块，可以获得挖矿报酬的1/32，也就是51/32=0.15625 Ether。最多获得20.15625=0.3125 Ether
5. 被引用的叔块，其矿工的报酬和叔块与区块之间的间隔层数有关系。

![叔块的引用报酬比例](https://raw.githubusercontent.com/jollysone/Picture-Library/master/blog/202303101716266.png)

## 总结

总体来看，对于矿工而言，`空块的诞生会导致矿工费/Gas费的减少`，`孤块率过高也就是无效计算过多将直接导致收入减少`，`叔块引用将获得一定的额外的叔块引用奖励`。所以矿工在接入算力时，最好应该考虑一些孤块率更低的矿池，从而更好地保障自己的挖矿收入。

