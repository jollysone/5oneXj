<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ… - ä¸“æ³¨äºåŒºå—é“¾æ™ºèƒ½åˆçº¦å¼€å‘å’Œå®¡è®¡ | 5oneXjâ€²s Blog</title><meta name="Description" content="ä¸“æ³¨äºåŒºå—é“¾æ™ºèƒ½åˆçº¦å¼€å‘å’Œå®¡è®¡ | 5oneXjâ€²s Blog"><meta property="og:title" content="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…" />
<meta property="og:description" content="ä»€ä¹ˆæ˜¯ Foundry? æ¥è‡ª Foundry å®˜ç½‘ (getfoundry.sh) å¯¹è¯¥å·¥å…·çš„ä»‹ç»ï¼š Foundryæ˜¯ ä¸€ä¸ªç”¨ Rustç¼–å†™çš„ç”¨äºä»¥å¤ªåŠåº”ç”¨ç¨‹åºå¼€å‘çš„æå¿«ã€å¯ç§»æ¤å’Œæ¨¡å—åŒ–çš„å·¥å…·åŒ… ( Foundry is a blazing fast, portable and" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.webhooks.top/posts/tools-foundry-introduce.html" /><meta property="og:image" content="https://blog.webhooks.top/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-19T20:13:10+08:00" />
<meta property="article:modified_time" content="2022-06-19T20:13:10+08:00" /><meta property="og:site_name" content="5oneXjâ€²s Blog" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://blog.webhooks.top/logo.png"/>

<meta name="twitter:title" content="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…"/>
<meta name="twitter:description" content="ä»€ä¹ˆæ˜¯ Foundry? æ¥è‡ª Foundry å®˜ç½‘ (getfoundry.sh) å¯¹è¯¥å·¥å…·çš„ä»‹ç»ï¼š Foundryæ˜¯ ä¸€ä¸ªç”¨ Rustç¼–å†™çš„ç”¨äºä»¥å¤ªåŠåº”ç”¨ç¨‹åºå¼€å‘çš„æå¿«ã€å¯ç§»æ¤å’Œæ¨¡å—åŒ–çš„å·¥å…·åŒ… ( Foundry is a blazing fast, portable and"/>
<meta name="application-name" content="5oneXjâ€²s Blog">
<meta name="apple-mobile-web-app-title" content="5oneXjâ€²s Blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://blog.webhooks.top/posts/tools-foundry-introduce.html" /><link rel="prev" href="https://blog.webhooks.top/posts/tools-hardhat-introduce.html" /><link rel="next" href="https://blog.webhooks.top/posts/solidity-smart-contract-security-re-entrancy.html" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/blog.webhooks.top\/posts\/tools-foundry-introduce.html"
        },"image": ["https:\/\/blog.webhooks.top\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "tools","wordcount":  6450 ,
        "url": "https:\/\/blog.webhooks.top\/posts\/tools-foundry-introduce.html","datePublished": "2022-06-19T20:13:10+08:00","dateModified": "2022-06-19T20:13:10+08:00","publisher": {
            "@type": "Organization",
            "name": "5oneXj","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/blog.webhooks.top\/images\/avatar.png",
                    "width":  528 ,
                    "height":  560 
                }},"author": {
                "@type": "Person",
                "name": "5oneXj"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="ä¸“æ³¨äºåŒºå—é“¾æ™ºèƒ½åˆçº¦å¼€å‘å’Œå®¡è®¡ | 5oneXjâ€²s Blog"><span class="header-title-pre"><i class='fa fa-duotone fa-code' style='color: #074f6a;margin-right:12px;'></i></span><span id="id-1" class="typeit"></span><span class="header-title-post"><x style='color: #8f5656;'> Blog</x></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts.html" title="æ‰€æœ‰æ–‡ç« "> Posts </a><a class="menu-item" href="/tags.html" title="æ‰€æœ‰æ ‡ç­¾"> Tags </a><a class="menu-item" href="/categories.html" title="æ‰€æœ‰åˆ†ç±»"> Categories </a><a class="menu-item" href="/about.html" title="å…³äº"> About </a><a class="menu-item" href="https://github.com/jollysone" title="GitHub" rel="noopener noreffer" target="_blank">  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="ä¸“æ³¨äºåŒºå—é“¾æ™ºèƒ½åˆçº¦å¼€å‘å’Œå®¡è®¡ | 5oneXjâ€²s Blog"><span class="header-title-pre"><i class='fa fa-duotone fa-code' style='color: #074f6a;margin-right:12px;'></i></span><span id="id-2" class="typeit"></span><span class="header-title-post"><x style='color: #8f5656;'> Blog</x></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts.html" title="æ‰€æœ‰æ–‡ç« ">Posts</a><a class="menu-item" href="/tags.html" title="æ‰€æœ‰æ ‡ç­¾">Tags</a><a class="menu-item" href="/categories.html" title="æ‰€æœ‰åˆ†ç±»">Categories</a><a class="menu-item" href="/about.html" title="å…³äº">About</a><a class="menu-item" href="https://github.com/jollysone" title="GitHub" rel="noopener noreffer" target="_blank"></a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>5oneXj</a></span>&nbsp;<span class="post-category">æ”¶å½•äº <a href="/categories/%E5%B7%A5%E5%85%B7.html"><i class="far fa-folder fa-fw" aria-hidden="true"></i>å·¥å…·</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-06-19">2022-06-19</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;çº¦ 6450 å­—&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;é¢„è®¡é˜…è¯» 13 åˆ†é’Ÿ&nbsp;<span id="/posts/tools-foundry-introduce.html" class="leancloud_visitors" data-flag-title="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…">
                        <i class="far fa-eye fa-fw" aria-hidden="true"></i>&nbsp;<span class=leancloud-visitors-count></span>&nbsp;æ¬¡é˜…è¯»
                    </span>&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#ä»€ä¹ˆæ˜¯-foundry">ä»€ä¹ˆæ˜¯ Foundry?</a></li>
        <li><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-foundry">ä¸ºä»€ä¹ˆé€‰æ‹© Foundryï¼Ÿ</a></li>
        <li><a href="#foundry-çš„ä¸»è¦åŠŸèƒ½">Foundry çš„ä¸»è¦åŠŸèƒ½</a></li>
        <li><a href="#foundry-çš„ç»„æˆ">Foundry çš„ç»„æˆ</a></li>
        <li><a href="#å¿«é€Ÿåˆ›å»ºä¸€ä¸ª-foundry-é¡¹ç›®">å¿«é€Ÿåˆ›å»ºä¸€ä¸ª Foundry é¡¹ç›®</a>
          <ul>
            <li><a href="#å®‰è£…-foundry">å®‰è£… Foundry</a>
              <ul>
                <li><a href="#é€šè¿‡è„šæœ¬httpsrawgithubusercontentcomfoundry-rsfoundrymasterfoundryupinstallå¿«é€Ÿå®‰è£…">é€šè¿‡<a href="https://raw.githubusercontent.com/foundry-rs/foundry/master/foundryup/install">è„šæœ¬</a>å¿«é€Ÿå®‰è£…</a></li>
              </ul>
            </li>
            <li><a href="#åˆå§‹åŒ–ä¸€ä¸ª-foundry-é¡¹ç›®">åˆå§‹åŒ–ä¸€ä¸ª Foundry é¡¹ç›®</a></li>
            <li><a href="#ç†è§£åˆå§‹åŒ–è¿‡ç¨‹ä¸­æ·»åŠ çš„æ™ºèƒ½åˆçº¦æµ‹è¯•ç”¨ä¾‹">ç†è§£åˆå§‹åŒ–è¿‡ç¨‹ä¸­æ·»åŠ çš„æ™ºèƒ½åˆçº¦ã€æµ‹è¯•ç”¨ä¾‹</a>
              <ul>
                <li><a href="#src-ç›®å½•">src ç›®å½•</a></li>
                <li><a href="#script-ç›®å½•">script ç›®å½•</a></li>
                <li><a href="#test-ç›®å½•">test ç›®å½•</a></li>
              </ul>
            </li>
            <li><a href="#æ‰§è¡Œæ„å»ºæµ‹è¯•">æ‰§è¡Œæ„å»º&amp;æµ‹è¯•</a></li>
          </ul>
        </li>
        <li><a href="#foundry-castçš„è¿›é˜¶ä½¿ç”¨">Foundry Castçš„è¿›é˜¶ä½¿ç”¨</a></li>
        <li><a href="#åŒºå—ç›¸å…³">åŒºå—ç›¸å…³</a>
          <ul>
            <li><a href="#æŸ¥è¯¢åŒºå—">æŸ¥è¯¢åŒºå—</a></li>
            <li><a href="#æŸ¥è¯¢åŒºå—ä¿¡æ¯">æŸ¥è¯¢åŒºå—ä¿¡æ¯</a></li>
          </ul>
        </li>
        <li><a href="#äº¤æ˜“ç›¸å…³">äº¤æ˜“ç›¸å…³</a>
          <ul>
            <li><a href="#æŸ¥è¯¢äº¤æ˜“">æŸ¥è¯¢äº¤æ˜“</a></li>
            <li><a href="#äº¤æ˜“è§£æ">äº¤æ˜“è§£æ</a></li>
            <li><a href="#äº¤æ˜“ç­¾å">äº¤æ˜“ç­¾å</a></li>
            <li><a href="#äº¤æ˜“è§£ç ">äº¤æ˜“è§£ç </a></li>
            <li><a href="#æ¨¡æ‹Ÿè¿è¡Œ">æ¨¡æ‹Ÿè¿è¡Œ</a></li>
          </ul>
        </li>
        <li><a href="#è´¦æˆ·ç®¡ç†">è´¦æˆ·ç®¡ç†</a>
          <ul>
            <li><a href="#æ–°å»ºè´¦æˆ·">æ–°å»ºè´¦æˆ·</a></li>
            <li><a href="#è´¦æˆ·ç­¾å">è´¦æˆ·ç­¾å</a></li>
            <li><a href="#è´¦æˆ·éªŒè¯">è´¦æˆ·éªŒè¯</a></li>
          </ul>
        </li>
        <li><a href="#åˆçº¦äº¤äº’">åˆçº¦äº¤äº’</a>
          <ul>
            <li><a href="#è·å–åˆçº¦">è·å–åˆçº¦</a></li>
            <li><a href="#ä¸‹è½½åˆçº¦">ä¸‹è½½åˆçº¦</a></li>
            <li><a href="#è°ƒç”¨åˆçº¦">è°ƒç”¨åˆçº¦</a></li>
            <li><a href="#è§£æabi">è§£æABI</a></li>
          </ul>
        </li>
        <li><a href="#ç¼–ç è§£ç ">ç¼–ç è§£ç </a></li>
        <li><a href="#tips">Tips</a>
          <ul>
            <li><a href="#è®¾ç½®eth_prc_url">è®¾ç½®ETH_PRC_URL</a></li>
            <li><a href="#è®¾ç½®etherscan_api_key">è®¾ç½®ETHERSCAN_API_KEY</a></li>
            <li><a href="#jsonæ ¼å¼åŒ–">JSONæ ¼å¼åŒ–</a></li>
          </ul>
        </li>
        <li><a href="#anvilæœ¬åœ°èŠ‚ç‚¹çš„ä½¿ç”¨">Anvilæœ¬åœ°èŠ‚ç‚¹çš„ä½¿ç”¨</a>
          <ul>
            <li><a href="#åŸºæœ¬å‘½ä»¤è¡Œ">åŸºæœ¬å‘½ä»¤è¡Œ</a></li>
            <li><a href="#prcçš„ä½¿ç”¨">PRCçš„ä½¿ç”¨</a></li>
          </ul>
        </li>
        <li><a href="#forgeå‘½ä»¤è¡Œè¿›é˜¶çš„ä½¿ç”¨">Forgeå‘½ä»¤è¡Œè¿›é˜¶çš„ä½¿ç”¨</a>
          <ul>
            <li><a href="#åˆå§‹åŒ–é¡¹ç›®">åˆå§‹åŒ–é¡¹ç›®</a></li>
          </ul>
        </li>
        <li><a href="#çƒ­æ›´æ–°">çƒ­æ›´æ–°</a>
          <ul>
            <li><a href="#æµ‹è¯•">æµ‹è¯•</a></li>
          </ul>
        </li>
        <li><a href="#å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</a>
          <ul>
            <li><a href="#ä½¿ç”¨forgeå®‰è£…æ’ä»¶">ä½¿ç”¨forgeå®‰è£…æ’ä»¶</a></li>
            <li><a href="#ä½¿ç”¨npmå®‰è£…æ’ä»¶">ä½¿ç”¨npmå®‰è£…æ’ä»¶</a></li>
          </ul>
        </li>
        <li><a href="#æµ‹è¯•ä¸€">æµ‹è¯•ä¸€</a>
          <ul>
            <li><a href="#ä»£ç ä¸­forkç½‘ç»œ">ä»£ç ä¸­forkç½‘ç»œ</a></li>
            <li><a href="#ä»ä»£ç ä¸­è¯»å–ç¯å¢ƒå˜é‡">ä»ä»£ç ä¸­è¯»å–ç¯å¢ƒå˜é‡</a></li>
            <li><a href="#å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </a></li>
            <li><a href="#vmsol">vm.sol</a></li>
          </ul>
        </li>
        <li><a href="#è¿è¡Œè„šæœ¬">è¿è¡Œè„šæœ¬</a></li>
        <li><a href="#è„šæœ¬éƒ¨ç½²åˆçº¦">è„šæœ¬éƒ¨ç½²åˆçº¦</a>
          <ul>
            <li><a href="#éƒ¨ç½²å¤šä¸ªç½‘ç»œ">éƒ¨ç½²å¤šä¸ªç½‘ç»œ</a></li>
          </ul>
        </li>
        <li><a href="#tips-1">Tipsï¼š</a></li>
        <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
        <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="ä»€ä¹ˆæ˜¯-foundry">ä»€ä¹ˆæ˜¯ Foundry?</h2>
<p>æ¥è‡ª Foundry <a href="https://getfoundry.sh" target="_blank" rel="noopener noreffer ">å®˜ç½‘ (getfoundry.sh) </a> å¯¹è¯¥å·¥å…·çš„ä»‹ç»ï¼š</p>
<blockquote>
<p>Foundryæ˜¯ ä¸€ä¸ªç”¨ Rustç¼–å†™çš„ç”¨äºä»¥å¤ªåŠåº”ç”¨ç¨‹åºå¼€å‘çš„æå¿«ã€å¯ç§»æ¤å’Œæ¨¡å—åŒ–çš„å·¥å…·åŒ… ( Foundry is a blazing fast, portable and modular toolkit for Ethereum application development written in Rust.)</p>
</blockquote>
<p>é¡¹ç›®è®¾æ–½ï¼š</p>
<ul>
<li>å®˜ç½‘ï¼š<a href="https://getfoundry.sh" target="_blank" rel="noopener noreffer ">https://getfoundry.sh</a></li>
<li>Github ä»“åº“ï¼š<a href="https://github.com/foundry-rs/foundry" target="_blank" rel="noopener noreffer ">https://github.com/foundry-rs/foundry</a></li>
<li>æ–‡æ¡£ï¼š<a href="https://book.getfoundry.sh" target="_blank" rel="noopener noreffer ">https://book.getfoundry.sh</a></li>
</ul>
<p>ä»‹ç»çš„è§£é‡Šï¼š</p>
<ul>
<li><strong>ç”¨ Rust è¯­è¨€ç¼–å†™</strong>ï¼š Foundry å®Œå…¨é‡‡ç”¨ Rust è¯­è¨€å¼€å‘ï¼Œ <a href="https://github.com/foundry-rs/foundry" target="_blank" rel="noopener noreffer ">Github ä¸Šçš„æºä»£ç ä»“åº“</a> æ˜¯ä¸€ä¸ª Rust è¯­è¨€å·¥ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è·å– <a href="https://github.com/foundry-rs/foundry/releases" target="_blank" rel="noopener noreffer ">Release çš„äºŒè¿›åˆ¶æ–‡ä»¶</a>ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Rust è¯­è¨€çš„ cargo åŒ…ç®¡ç†<a href="https://github.com/foundry-rs/foundry#installing-from-source" target="_blank" rel="noopener noreffer ">å·¥å…·ç¼–è¯‘&amp;æ„å»ºå®‰è£…</a>;</li>
<li><strong>ç”¨äºä»¥å¤ªåŠåº”ç”¨ç¨‹åºå¼€å‘</strong>ï¼š Foundry ä½œä¸º ä»¥å¤ªåŠï¼ˆSolidityè¯­è¨€ï¼‰é¡¹ç›®/åº”ç”¨ç¨‹åºå¼€å‘çš„ â€œå·¥ç¨‹åŒ–â€ å·¥å…·ï¼Œæä¾›ä¸“ä¸š Solidity å¼€å‘ç¯å¢ƒä¸â€œå·¥å…·é“¾â€ã€‚<strong>é€šè¿‡å®ƒä½ å¯ä»¥å¿«é€Ÿã€æ–¹ä¾¿çš„å®Œæˆä¾èµ–é¡¹ç®¡ç†ã€ç¼–è¯‘ã€è¿è¡Œæµ‹è¯•ã€éƒ¨ç½²ï¼Œå¹¶å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå’Œ Solidity è„šæœ¬ä¸é“¾è¿›è¡Œäº¤äº’</strong>;</li>
<li><strong>æå¿«</strong>ï¼š Foundry åˆ©ç”¨ <a href="https://github.com/gakonst/ethers-rs/tree/master/ethers-solc/" target="_blank" rel="noopener noreffer ">ethers-solc</a> æ¯”è¾ƒäºä¼ ç»Ÿé€šè¿‡ Node.js è¾…åŠ©å®Œæˆçš„æµ‹è¯•ç”¨ä¾‹/å·¥ç¨‹ï¼ŒFoundry æ„å»ºã€æµ‹è¯•çš„æ‰§è¡Œé€Ÿåº¦å¾ˆå¿«ï¼ˆåˆ›å»ºä¸€ä¸ªå·¥ç¨‹ï¼Œå†™ä¸€äº›æµ‹è¯•ç”¨ä¾‹è·‘ä¸€ä¸‹ä¼šæ„Ÿå—åˆ°éœ‡æ’¼ï¼‰;</li>
<li><strong>å¯ç§»æ¤</strong>: Foundry å·¥ç¨‹æ”¯æŒä¸å…¶ä»–ç±»å‹çš„å·¥ç¨‹é›†æˆï¼ˆå¦‚ï¼š<a href="https://book.getfoundry.sh/config/hardhat" target="_blank" rel="noopener noreffer ">ä¸ Hardhat é›†æˆ</a>ï¼‰;</li>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šé€šè¿‡ git submodule &amp; æ„å»ºç›®å½•æ˜ å°„ï¼Œå¿«é€Ÿæ–¹ä¾¿çš„å¼•å…¥ä¾èµ–;</li>
</ul>
<!--ğŸ‘†TODO: some ğŸ”— LINKS can be added when our Hardhat tutorial is complete -->
<h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-foundry">ä¸ºä»€ä¹ˆé€‰æ‹© Foundryï¼Ÿ</h2>
<p>å¦‚æœä½ æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æˆ–æœ‰è¿‡ç±»ä¼¼ä½“éªŒï¼Œä½ ä¸€å®šè¦è¯•è¯• Foundryï¼š</p>
<ul>
<li><del>å¦‚æœä½ æœ‰ Rust â€œè¯­è¨€ä¿¡ä»°â€</del>ï¼Œå¦‚æœä½ æ˜¯ä¸ªä¸“ä¸šçš„ ä»¥å¤ªåŠï¼ˆSolidityè¯­è¨€ï¼‰åº”ç”¨å¼€å‘è€…ï¼›</li>
<li>ä½ æ›¾ç»ç”¨è¿‡ç±»ä¼¼ Hardhat.js è¿™æ ·çš„å·¥å…·ï¼›</li>
<li>ä½ åŒå€¦äº†å¤§é‡æµ‹è¯•ç”¨ä¾‹çš„ç­‰å¾…ï¼Œéœ€è¦æœ‰å·¥å…·<strong>æ›´åŠ å¿«é€Ÿ</strong>çš„è·‘å®Œä½ çš„æµ‹è¯•ç”¨ä¾‹ï¼›</li>
<li>ä½ è§‰å¾—å¤„ç† BigNumber ç¨å¾®æœ‰ä¸€ç‚¹ç‚¹ğŸ¤éº»çƒ¦;</li>
<li>æœ‰è¿‡<strong>é€šè¿‡ Solidity è¯­è¨€æœ¬èº«å®Œæˆæµ‹è¯•ç”¨ä¾‹</strong>ï¼ˆæˆ–æµ‹è¯•åˆçº¦çš„åˆçº¦ï¼‰çš„éœ€æ±‚ï¼›</li>
<li>ä½ è§‰å¾—é€šè¿‡ git submodule çš„æ–¹å¼ç®¡ç†ä¾èµ–æ›´åŠ æ–¹ä¾¿ï¼ˆè€Œä¸æ˜¯ npmï¼‰ï¼›</li>
<li>Â·Â·Â·</li>
</ul>
<p>å¦‚æœæœ‰ä»¥ä¸‹æƒ…å†µ Foundry å¯èƒ½ä¸é€‚åˆä½ ï¼š</p>
<ul>
<li>Solidity åˆå­¦è€…ï¼›</li>
<li>ä½ çš„é¡¹ç›®ä¸éœ€è¦å†™æµ‹è¯•ç”¨ä¾‹ã€ä¸éœ€è¦è¿‡å¤šåœ¨ Solidity å·¥ç¨‹æ–¹é¢çš„è‡ªåŠ¨åŒ–æ“ä½œï¼›</li>
</ul>
<h2 id="foundry-çš„ä¸»è¦åŠŸèƒ½">Foundry çš„ä¸»è¦åŠŸèƒ½</h2>
<blockquote>
<p>è¯¥éƒ¨åˆ†æºäº Foundry book (<a href="https://book.getfoundry.sh" target="_blank" rel="noopener noreffer ">https://book.getfoundry.sh</a>)ï¼Œè®©ç« èŠ‚çš„ç†è§£æ›´å®¹æ˜“ã€‚</p>
</blockquote>
<ul>
<li><a href="https://book.getfoundry.sh/projects/creating-a-new-project" target="_blank" rel="noopener noreffer ">åˆ›å»ºä»¥å¤ªåŠï¼ˆSolidityï¼‰æ™ºèƒ½åˆçº¦åº”ç”¨å¼€å‘é¡¹ç›®</a>ï¼Œ<a href="https://book.getfoundry.sh/projects/working-on-an-existing-project" target="_blank" rel="noopener noreffer ">å¼€å‘å·²æœ‰çš„é¡¹ç›®</a>;</li>
<li><a href="https://book.getfoundry.sh/projects/dependencies" target="_blank" rel="noopener noreffer ">ç®¡ç†ä»¥å¤ªåŠ(Solidity)æ™ºèƒ½åˆçº¦çš„ä¾èµ–é¡¹ç›®</a>;</li>
<li><a href="https://book.getfoundry.sh/forge/writing-tests" target="_blank" rel="noopener noreffer ">åˆ›å»ºç”± Solidity è¯­è¨€ç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹ï¼ˆå¹¶ä¸”èƒ½å¾ˆå¿«é€Ÿçš„æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ï¼‰</a>: å¹¶ä¸”æ”¯æŒ<a href="https://book.getfoundry.sh/forge/fuzz-testing" target="_blank" rel="noopener noreffer ">æ¨¡ç³Šæµ‹è¯•</a>ä¸<a href="https://book.getfoundry.sh/forge/differential-ffi-testing" target="_blank" rel="noopener noreffer ">å·®å¼‚æµ‹è¯•</a>ç­‰æ–¹ä¾¿ã€ä¸“ä¸šçš„æµ‹è¯•æ–¹å¼;</li>
<li>é€šè¿‡ <a href="https://book.getfoundry.sh/forge/cheatcodes" target="_blank" rel="noopener noreffer ">Cheatcodesï¼ˆä½œå¼Šç ï¼‰</a> åœ¨ Solidityè¯­è¨€ ç¼–å†™çš„æµ‹è¯•ç”¨ä¾‹ä¸­<strong>è¿›è¡Œ â€œEVMç¯å¢ƒä¹‹å¤–â€ çš„ vm åŠŸèƒ½è¿›è¡Œäº¤äº’ä¸æ–­è¨€</strong>ï¼šæ›´æ¢æµ‹è¯•ç”¨ä¾‹è¯­å¥æ‰§è¡Œè€…çš„é’±åŒ…åœ°å€ï¼ˆæ›´æ¢ <code>msg.sender</code>ï¼‰ã€å¯¹ EVM å¤–çš„ Event äº‹ä»¶è¿›è¡Œæ–­è¨€ï¼›</li>
<li>æ‰§è¡Œè¿‡ç¨‹ä¸é”™è¯¯è¿½è¸ªï¼š<a href="https://book.getfoundry.sh/forge/traces" target="_blank" rel="noopener noreffer ">â€œå‡½æ•°å †æ ˆâ€çº§çš„é”™è¯¯è¿½è¸ªï¼ˆTracesï¼‰</a>ï¼›</li>
<li><a href="https://book.getfoundry.sh/forge/deploying" target="_blank" rel="noopener noreffer ">éƒ¨ç½²åˆçº¦å’Œè‡ªåŠ¨åŒ–çš„å®Œæˆscanä¸Šåˆçº¦çš„å¼€æºéªŒè¯</a>ï¼›</li>
<li>åœ¨é¡¹ç›®ä¸­æ”¯æŒ<a href="https://book.getfoundry.sh/forge/gas-tracking" target="_blank" rel="noopener noreffer ">å®Œæ•´çš„gasä½¿ç”¨æƒ…å†µè¿½è¸ª</a>ï¼šåŒ…æ‹¬åˆçº¦æµ‹è¯•ç»†èŠ‚çš„gasç”¨é‡å’ŒgasæŠ¥å‘Šï¼›</li>
<li>äº¤äº’å¼<a href="https://book.getfoundry.sh/forge/debugger" target="_blank" rel="noopener noreffer ">è°ƒè¯•å™¨</a>ï¼›</li>
</ul>
<h2 id="foundry-çš„ç»„æˆ">Foundry çš„ç»„æˆ</h2>
<p>Foundry é¡¹ç›®ç”± <code>Forge</code>, <code>Cast</code>, <code>Anvil</code> å‡ ä¸ªéƒ¨åˆ†ï¼ˆå‘½ä»¤è¡Œå·¥å…·ï¼‰ç»„æˆ</p>
<ul>
<li>Forge: Foundry é¡¹ç›®ä¸­<strong>æ‰§è¡Œåˆå§‹åŒ–é¡¹ç›®ã€ç®¡ç†ä¾èµ–ã€æµ‹è¯•ã€æ„å»ºã€éƒ¨ç½²æ™ºèƒ½åˆçº¦</strong>çš„å‘½ä»¤è¡Œå·¥å…·;</li>
<li>Cast: Foundry é¡¹ç›®ä¸­<strong>ä¸ RPC èŠ‚ç‚¹äº¤äº’</strong>çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å¯ä»¥è¿›è¡Œæ™ºèƒ½åˆçº¦çš„è°ƒç”¨ã€å‘é€äº¤æ˜“æ•°æ®æˆ–æ£€ç´¢ä»»ä½•ç±»å‹çš„é“¾ä¸Šæ•°æ®;</li>
<li>Anvil:  Foundry é¡¹ç›®ä¸­<strong>å¯åŠ¨çš„æœ¬åœ°æµ‹è¯•ç½‘/èŠ‚ç‚¹</strong>çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å¯ä»¥ä½¿ç”¨å®ƒé…åˆæµ‹è¯•å‰ç«¯åº”ç”¨ä¸éƒ¨ç½²åœ¨è¯¥æµ‹è¯•ç½‘çš„åˆçº¦æˆ–é€šè¿‡ RPC è¿›è¡Œäº¤äº’;</li>
</ul>
<h2 id="å¿«é€Ÿåˆ›å»ºä¸€ä¸ª-foundry-é¡¹ç›®">å¿«é€Ÿåˆ›å»ºä¸€ä¸ª Foundry é¡¹ç›®</h2>
<blockquote>
<p>å†…å®¹å‡ºè‡ª Foundry book çš„ Getting Start éƒ¨åˆ†</p>
</blockquote>
<p>å³å°†å®Œæˆçš„è¿‡ç¨‹ï¼š</p>
<ol>
<li>å®‰è£… Foundry;</li>
<li>åˆå§‹åŒ–ä¸€ä¸ª Foundry é¡¹ç›®;</li>
<li>ç†è§£åˆå§‹åŒ–è¿‡ç¨‹ä¸­æ·»åŠ çš„æ™ºèƒ½åˆçº¦ã€æµ‹è¯•ç”¨ä¾‹ï¼›</li>
<li>æ‰§è¡Œæ„å»º&amp;æµ‹è¯•;</li>
</ol>
<h3 id="å®‰è£…-foundry">å®‰è£… Foundry</h3>
<p>å¯¹äºä¸åŒçš„ç¯å¢ƒï¼š</p>
<ul>
<li>MacOS / Linux ï¼ˆç­‰ Unix like ç³»ç»Ÿï¼‰ï¼š
<ul>
<li>é€šè¿‡ <code>foundryup</code> å®‰è£…ï¼ˆğŸ‘ˆFoundry é¡¹ç›®é¦–é¡µæ¨èçš„æ–¹å¼ï¼‰;</li>
<li>é€šè¿‡ æºä»£ç æ„å»º å®‰è£…;</li>
</ul>
</li>
<li>Windows
<ul>
<li>é€šè¿‡ æºä»£ç æ„å»º å®‰è£…;</li>
</ul>
</li>
<li>Docker ç¯å¢ƒ
<ul>
<li>å‚è€ƒ Foundry Package: <a href="https://github.com/gakonst/foundry/pkgs/container/foundry" target="_blank" rel="noopener noreffer "> https://github.com/gakonst/foundry/pkgs/container/foundry</a></li>
</ul>
</li>
<li>Github Actionï¼š ç”¨äºæ„å»ºå®Œæ•´çš„ Action æµç¨‹
<ul>
<li>å‚è€ƒ <a href="https://github.com/foundry-rs/foundry-toolchain" target="_blank" rel="noopener noreffer ">https://github.com/foundry-rs/foundry-toolchain</a></li>
</ul>
</li>
</ul>
<hr>
<h4 id="é€šè¿‡è„šæœ¬httpsrawgithubusercontentcomfoundry-rsfoundrymasterfoundryupinstallå¿«é€Ÿå®‰è£…">é€šè¿‡<a href="https://raw.githubusercontent.com/foundry-rs/foundry/master/foundryup/install" target="_blank" rel="noopener noreffer ">è„šæœ¬</a>å¿«é€Ÿå®‰è£…</h4>
<p>é€šè¿‡æœ‰<code>bash</code>çš„ï¼ˆæˆ–è€…ç±»Unixç¯å¢ƒï¼‰å¿«é€Ÿå®‰è£…</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ curl -L https://foundry.paradigm.xyz <span class="p">|</span> bash
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œåå°†ä¼šå®‰è£… <code>foundryup</code>ï¼Œåœ¨æ­¤åæ‰§è¡Œå®ƒ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ foundryup
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼š<code>forge</code>ã€<code>cast</code> å’Œ <code>anvil</code>ã€‚</p>
<!--

---

#### [é€šè¿‡æºä»£ç æ„å»ºå®‰è£…ï¼ˆéœ€è¦ä½ äº†è§£ä¸€ç‚¹ Rust ç¯å¢ƒï¼‰](https://book.getfoundry.sh/getting-started/installation#building-from-source)

è¦ä»æºä»£ç æ„å»ºï¼Œæ‚¨éœ€è¦è·å– `Rust` å’Œ `Cargo`ã€‚è·å¾—ä¸¤è€…çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ `rustup`ã€‚

```shell
# clone é¡¹ç›®ç›®å½•è‡³æœ¬åœ°
git clone https://github.com/foundry-rs/foundry

# è¿›å…¥é¡¹ç›®ç›®å½•
cd foundry

# å®‰è£… cast + forge
cargo install --path ./cli --profile local --bins --locked --force

# å®‰è£… anvil
cargo install --path ./anvil --profile local --locked --force
```
-->
<h3 id="åˆå§‹åŒ–ä¸€ä¸ª-foundry-é¡¹ç›®">åˆå§‹åŒ–ä¸€ä¸ª Foundry é¡¹ç›®</h3>
<p>é€šè¿‡ <code>forge</code> çš„ <code>forge init</code> åˆå§‹åŒ–é¡¹ç›® &ldquo;hello_wtf&rdquo;</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ forge init hello_wtf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Initializing /Users/username/hello_wtf...
</span></span><span class="line"><span class="cl">Installing forge-std in <span class="s2">&#34;/Users/username/hello_wtf/lib/forge-std&#34;</span> <span class="o">(</span>url: Some<span class="o">(</span><span class="s2">&#34;https://github.com/foundry-rs/forge-std&#34;</span><span class="o">)</span>, tag: None<span class="o">)</span>
</span></span><span class="line"><span class="cl">    Installed forge-std
</span></span><span class="line"><span class="cl">    Initialized forge project.
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯¥è¿‡ç¨‹é€šè¿‡å®‰è£…ä¾èµ–<code>forge-std</code>åˆå§‹åŒ–äº†ä¸€ä¸ª Foundry é¡¹ç›®</p>
<p>åœ¨é¡¹ç›®ç›®å½•ä¸­çœ‹åˆ°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ tree -L <span class="m">2</span> 
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">â”œâ”€â”€ foundry.toml        <span class="c1"># Foundry çš„ package é…ç½®æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">â”œâ”€â”€ lib                 <span class="c1"># Foundry çš„ä¾èµ–åº“</span>
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ forge-std       <span class="c1"># å·¥å…· forge çš„åŸºç¡€ä¾èµ–</span>
</span></span><span class="line"><span class="cl">â”œâ”€â”€ script              <span class="c1"># Foundry çš„è„šæœ¬</span>
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ Counter.s.sol   <span class="c1"># ç¤ºä¾‹åˆçº¦ Counter çš„è„šæœ¬</span>
</span></span><span class="line"><span class="cl">â”œâ”€â”€ src                 <span class="c1"># æ™ºèƒ½åˆçº¦çš„ä¸šåŠ¡é€»è¾‘ã€æºä»£ç å°†ä¼šæ”¾åœ¨è¿™é‡Œ</span>
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ Counter.sol     <span class="c1"># ç¤ºä¾‹åˆçº¦</span>
</span></span><span class="line"><span class="cl">â””â”€â”€ <span class="nb">test</span>                <span class="c1"># æµ‹è¯•ç”¨ä¾‹ç›®å½•</span>
</span></span><span class="line"><span class="cl">    â””â”€â”€ Counter.t.sol   <span class="c1"># ç¤ºä¾‹åˆçº¦çš„æµ‹è¯•ç”¨ä¾‹</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æç¤ºï¼š</p>
<ul>
<li>ä¾èµ–é¡¹ä½œä¸º git submodule åœ¨ <code>./lib</code> ç›®å½•ä¸­</li>
<li>å…³äº Foundry çš„ package é…ç½®æ–‡ä»¶è¯·è¯¦ç»†å‚è€ƒ: <a href="https://github.com/foundry-rs/foundry/blob/master/config/README.md#all-options" target="_blank" rel="noopener noreffer ">https://github.com/foundry-rs/foundry/blob/master/config/README.md#all-options</a></li>
</ul>
<h3 id="ç†è§£åˆå§‹åŒ–è¿‡ç¨‹ä¸­æ·»åŠ çš„æ™ºèƒ½åˆçº¦æµ‹è¯•ç”¨ä¾‹">ç†è§£åˆå§‹åŒ–è¿‡ç¨‹ä¸­æ·»åŠ çš„æ™ºèƒ½åˆçº¦ã€æµ‹è¯•ç”¨ä¾‹</h3>
<h4 id="src-ç›®å½•">src ç›®å½•</h4>
<p>ä¸»è¦ç”±ä¸šåŠ¡é€»è¾‘æ„æˆ
<code>src</code> ç›®å½•ä¸­çš„ <code>./src/Counter.sol</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-solidity" data-lang="solidity"><span class="line"><span class="cl"><span class="c1">// SPDX-License-Identifier: UNLICENSED
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">pragma solidity</span> <span class="o">^</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">.</span><span class="mi">13</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">contract</span> <span class="nc">Counter</span> <span class="p">{</span>          <span class="c1">// ä¸€ä¸ªå¾ˆç®€å•çš„ Counter åˆçº¦
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">uint256</span> <span class="k">public</span> <span class="nb">number</span><span class="p">;</span>  <span class="c1">// ç»´æŠ¤ä¸€ä¸ª public çš„ uint256 æ•°å­—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è®¾ç½® number å˜é‡çš„å†…å®¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nf">setNumber</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">newNumber</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">        <span class="nb">number</span> <span class="o">=</span> <span class="n">newNumber</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// è®© number å˜é‡çš„å†…å®¹è‡ªå¢
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nf">increment</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">number</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="script-ç›®å½•">script ç›®å½•</h4>
<p>å‚è€ƒ Foundry é¡¹ç›®æ–‡æ¡£ä¸­çš„ <a href="https://book.getfoundry.sh/tutorials/solidity-scripting" target="_blank" rel="noopener noreffer ">Solidity-scripting</a> è¯¥ç›®å½•ä¸»è¦ç”±â€œéƒ¨ç½²â€è„šæœ¬æ„æˆï¼ˆä¹Ÿå¯é€šè¿‡è¯¥è„šæœ¬è°ƒç”¨ Foundry æä¾›çš„ <code>vm</code> åŠŸèƒ½å®ç°åº”ç”¨ä¸šåŠ¡é€»è¾‘ä¹‹å¤–çš„é«˜çº§åŠŸèƒ½ï¼Œç­‰åŒäº Hardhat.js ä¸­çš„ scriptsï¼‰ã€‚</p>
<p>è¯¦è§script ç›®å½•ä¸­çš„ <code>./script/Counter.s.sol</code>ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-solidity" data-lang="solidity"><span class="line"><span class="cl"><span class="c1">// SPDX-License-Identifier: UNLICENSED
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">pragma solidity</span> <span class="o">^</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">.</span><span class="mi">13</span><span class="p">;</span> <span class="c1">// è®¸å¯ å’Œ Solidityç‰ˆæœ¬æ ‡è¯†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;forge-std/Script.sol&#34;</span><span class="p">;</span> <span class="c1">// å¼•å…¥foundry forgeä¸­çš„Scriptåº“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="s">&#34;../src/Counter.sol&#34;</span><span class="p">;</span> <span class="c1">// å¼•å…¥è¦éƒ¨ç½²çš„Counteråˆçº¦
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// éƒ¨ç½²è„šæœ¬ç»§æ‰¿äº†Scriptåˆçº¦
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">contract</span> <span class="nc">CounterScript</span> <span class="k">is</span> <span class="n">Script</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å¯é€‰å‡½æ•°ï¼Œåœ¨æ¯ä¸ªå‡½æ•°è¿è¡Œä¹‹å‰è¢«è°ƒç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nf">setUp</span><span class="p">()</span> <span class="k">public</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// éƒ¨ç½²åˆçº¦æ—¶ä¼šè°ƒç”¨run()å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nf">run</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">vm</span><span class="p">.</span><span class="n">startBroadcast</span><span class="p">();</span> <span class="c1">// å¼€å§‹éƒ¨ç½²
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">new</span> <span class="n">Counter</span><span class="p">();</span> <span class="c1">// åˆ›å»ºåˆçº¦
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">vm</span><span class="p">.</span><span class="n">stopBroadcast</span><span class="p">();</span> <span class="c1">// ç»“æŸéƒ¨ç½²
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Foundryçš„éƒ¨ç½²è„šæœ¬æ˜¯ä¸€ä¸ªç”¨Solidityå†™çš„æ™ºèƒ½åˆçº¦ï¼Œè™½ç„¶å®ƒä¸ä¼šè¢«éƒ¨ç½²ï¼Œä½†ç¬¦åˆSolidityçš„è§„èŒƒã€‚ä½ å¯ä»¥ç”¨<code>forge script</code>è¿è¡Œè„šæœ¬å¹¶éƒ¨ç½²åˆçº¦ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">forge script script/Counter.s.sol:CounterScript
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="test-ç›®å½•">test ç›®å½•</h4>
<p>ä¸»è¦ç”±åˆçº¦çš„æµ‹è¯•ç”¨ä¾‹æ„æˆ</p>
<p>test ç›®å½•ä¸­çš„ <code>./test/Counter.t.sol</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-solidity" data-lang="solidity"><span class="line"><span class="cl"><span class="c1">// SPDX-License-Identifier: UNLICENSED
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">pragma solidity</span> <span class="o">^</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">.</span><span class="mi">13</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="s">&#34;forge-std/Test.sol&#34;</span><span class="p">;</span>        <span class="c1">// å¼•å…¥ forge-std ä¸­ç”¨äºæµ‹è¯•çš„ä¾èµ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kn">import</span> <span class="s">&#34;../src/Counter.sol&#34;</span><span class="p">;</span>        <span class="c1">// å¼•å…¥ç”¨äºæµ‹è¯•çš„ä¸šåŠ¡åˆçº¦
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="c1">// åŸºäº forge-std çš„ test åˆçº¦ä¾èµ–å®ç°æµ‹è¯•ç”¨ä¾‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">contract</span> <span class="nc">CounterTest</span> <span class="k">is</span> <span class="n">Test</span> <span class="p">{</span>      
</span></span><span class="line"><span class="cl">    <span class="n">Counter</span> <span class="k">public</span> <span class="n">counter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// åˆå§‹åŒ–æµ‹è¯•ç”¨ä¾‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nf">setUp</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">       <span class="n">counter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Counter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">       <span class="n">counter</span><span class="p">.</span><span class="n">setNumber</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// åŸºäºåˆå§‹åŒ–æµ‹è¯•ç”¨ä¾‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// æ–­è¨€æµ‹è¯•è‡ªå¢åçš„ counter çš„ number è¿”å›å€¼ åŒç­‰äº 1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nf">testIncrement</span><span class="p">()</span> <span class="k">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">counter</span><span class="p">.</span><span class="n">increment</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">assertEq</span><span class="p">(</span><span class="n">counter</span><span class="p">.</span><span class="nb">number</span><span class="p">(),</span> <span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// åŸºäºåˆå§‹åŒ–æµ‹è¯•ç”¨ä¾‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// æ‰§è¡Œå·®å¼‚æµ‹è¯•æµ‹è¯•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// forge æµ‹è¯•çš„è¿‡ç¨‹ä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// ä¸º testSetNumber å‡½æ•°å‚æ•°ä¼ é€’ä¸åŒçš„ unit256 ç±»å‹çš„ x
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// è¾¾åˆ°æµ‹è¯• counter çš„ setNumber å‡½æ•° ä¸ºä¸åŒçš„ x è®¾ç½®ä¸åŒçš„æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// æ–­è¨€ number() çš„è¿”å›å€¼ç­‰åŒäºå·®å¼‚æµ‹è¯•çš„ x å‚æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nf">testSetNumber</span><span class="p">(</span><span class="kt">uint256</span> <span class="n">x</span><span class="p">)</span> <span class="k">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">counter</span><span class="p">.</span><span class="n">setNumber</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">assertEq</span><span class="p">(</span><span class="n">counter</span><span class="p">.</span><span class="nb">number</span><span class="p">(),</span> <span class="n">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å·®å¼‚æµ‹è¯•ï¼šå‚è€ƒ https://book.getfoundry.sh/forge/differential-ffi-testing
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ‰§è¡Œæ„å»ºæµ‹è¯•">æ‰§è¡Œæ„å»º&amp;æµ‹è¯•</h3>
<p>åœ¨é¡¹ç›®ç›®å½•ä¸­é€šè¿‡æ‰§è¡Œ <code>forge build</code> å®Œæˆæ„å»º</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ forge build
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>â ’<span class="o">]</span> Compiling...
</span></span><span class="line"><span class="cl"><span class="o">[</span>â ¢<span class="o">]</span> Compiling <span class="m">10</span> files with 0.8.17
</span></span><span class="line"><span class="cl"><span class="o">[</span>â °<span class="o">]</span> Solc 0.8.17 finished in 1.06s
</span></span><span class="line"><span class="cl">Compiler run successful
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®Œæˆæ„å»ºå é€šè¿‡ <code>forge test</code> å®Œæˆæµ‹è¯•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ forge <span class="nb">test</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>â ¢<span class="o">]</span> Compiling...
</span></span><span class="line"><span class="cl">No files changed, compilation skipped
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Running <span class="m">2</span> tests <span class="k">for</span> test/Counter.t.sol:CounterTest
</span></span><span class="line"><span class="cl"><span class="o">[</span>PASS<span class="o">]</span> testIncrement<span class="o">()</span> <span class="o">(</span>gas: 28312<span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>PASS<span class="o">]</span> testSetNumber<span class="o">(</span>uint256<span class="o">)</span> <span class="o">(</span>runs: 256, Î¼: 27609, ~: 28387<span class="o">)</span>
</span></span><span class="line"><span class="cl">Test result: ok. <span class="m">2</span> passed<span class="p">;</span> <span class="m">0</span> failed<span class="p">;</span> finished in 9.98ms
</span></span></code></pre></td></tr></table>
</div>
</div><p>è‡³æ­¤ï¼Œæ‚¨å·²å®Œæˆä¸Šæ‰‹ä½¿ç”¨ Foundry å¹¶ä¸”åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ã€‚</p>
<!--

  TODO: For foundry advanced useage ...

  We need cover: 
  
  - cli forge `test` : reference https://book.getfoundry.sh/forge/writing-tests
  - cheatcode.
  - Logs and traces levels.

... etc.

-->
<h2 id="foundry-castçš„è¿›é˜¶ä½¿ç”¨">Foundry Castçš„è¿›é˜¶ä½¿ç”¨</h2>
<p>ä¸»è¦ä»‹ç»Foundry Castçš„ä½¿ç”¨ï¼Œä½¿ç”¨Caståœ¨å‘½ä»¤è¡Œä¸‹è¾¾åˆ°<a href="https://etherscan.io/" target="_blank" rel="noopener noreffer ">Ethereum (ETH) Blockchain Explorer</a> çš„æ•ˆæœã€‚</p>
<p>ç»ƒä¹ å¦‚ä¸‹ç›®æ ‡</p>
<ul>
<li>æŸ¥è¯¢åŒºå—</li>
<li>æŸ¥è¯¢äº¤æ˜“</li>
<li>äº¤æ˜“è§£æ</li>
<li>è´¦æˆ·ç®¡ç†</li>
<li>åˆçº¦æŸ¥è¯¢</li>
<li>åˆçº¦äº¤äº’</li>
<li>ç¼–ç è§£æ</li>
<li>æœ¬åœ°æ¨¡æ‹Ÿé“¾ä¸Šäº¤æ˜“</li>
</ul>
<h2 id="åŒºå—ç›¸å…³">åŒºå—ç›¸å…³</h2>
<h3 id="æŸ¥è¯¢åŒºå—">æŸ¥è¯¢åŒºå—</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># $PRC_MAIN æ›¿æ¢æˆéœ€è¦çš„RPCåœ°å€</span>
</span></span><span class="line"><span class="cl">cast block-number --rpc-url<span class="o">=</span><span class="nv">$RPC_MAIN</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">15769241
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>å°†ç¯å¢ƒå˜é‡çš„<code>ETH_PRC_URL</code>è®¾ç½®ä¸º <code>--rpc-url</code> ä½ å°±ä¸éœ€è¦åœ¨æ¯ä¸ªå‘½ä»¤è¡Œåé¢å¢åŠ   <code>--rpc-url=$RPC_MAIN</code>  æˆ‘è¿™é‡Œç›´æ¥è®¾ç½®ä¸ºä¸»ç½‘</p>
</blockquote>
<h3 id="æŸ¥è¯¢åŒºå—ä¿¡æ¯">æŸ¥è¯¢åŒºå—ä¿¡æ¯</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># cast block &lt;BLOCK&gt; --rpc-url=$RPC_MAIN</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast block <span class="m">15769241</span> --rpc-url<span class="o">=</span><span class="nv">$RPC_MAIN</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ ¼å¼åŒ–</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast block <span class="m">15769241</span> --json --rpc-url<span class="o">=</span><span class="nv">$RPC_MAIN</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">baseFeePerGas        <span class="m">22188748210</span>
</span></span><span class="line"><span class="cl">difficulty           <span class="m">0</span>
</span></span><span class="line"><span class="cl">extraData            0x
</span></span><span class="line"><span class="cl">gasLimit             <span class="m">30000000</span>
</span></span><span class="line"><span class="cl">gasUsed              <span class="m">10595142</span>
</span></span><span class="line"><span class="cl"><span class="nb">hash</span>                 0x016e71f4130bac96a20761acbc0ba82a77c26f85513f1661adfd406d1c809543
</span></span><span class="line"><span class="cl">logsBloom            0x1c6150404140580410990400a61d01e30030b00100c2a6310b11b9405d012980125671129881101011501d399081855523a106443aef3ab07148626315f721550290981058030b2af90b213961204c6103d2002a076c9e12d0800475b8231f0d06a20100da57c60aa0c008280128284418503340087c8650104c34500c18aa1c2070878008c21c64207d1424000244811415afc507640448122060644c181204ba412f0af11365020880508105551226004c0801c1840183003a42062a5a2444c13266020c00081440008038492740a8204a0c6c050a29d52405b92e4b20f028a97a604c6b0849ca81c4d06009258b4206217803a168824484deb8513242f082
</span></span><span class="line"><span class="cl">miner                0x4675C7e5BaAFBFFbca748158bEcBA61ef3b0a263
</span></span><span class="line"><span class="cl">mixHash              0x09b7a94ef1d6c93caaff49ca8bf387652e0e33e116076b61f4d5ee79f0b91f92
</span></span><span class="line"><span class="cl">nonce                0x0000000000000000
</span></span><span class="line"><span class="cl">number               <span class="m">15769241</span>
</span></span><span class="line"><span class="cl">parentHash           0x95c60d89f2275a6a7b1a9545cf1fb6d8c614402cd7311c82bc7972c177f7812d
</span></span><span class="line"><span class="cl">receiptsRoot         0xe0240d60c448387123e412114cd0165b2af7b926d34bb824f8c544b022aa76f9
</span></span><span class="line"><span class="cl">sealFields           <span class="o">[]</span>
</span></span><span class="line"><span class="cl">sha3Uncles           0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347
</span></span><span class="line"><span class="cl">size                 <span class="m">149912</span>
</span></span><span class="line"><span class="cl">stateRoot            0xaa3e9d839e99c4791827c81df9c9129028a320432920205f191e3fb261d0951c
</span></span><span class="line"><span class="cl">timestamp            <span class="m">1666026803</span>
</span></span><span class="line"><span class="cl">totalDifficulty      <span class="m">58750003716598352816469</span>
</span></span><span class="line"><span class="cl">transactions:        <span class="o">[</span>
</span></span><span class="line"><span class="cl">	0xc4f5c10e4419698edaf7431df464340b389e4b79db959d58f42e82e8d1ed18ae
</span></span><span class="line"><span class="cl">	0xb90edeacf833ac6cb91a326c775ed86d8047a467404bd8c69782d2260983eaad
</span></span><span class="line"><span class="cl">	0x6f280650e35238ab930c9a0f3163443fffe2efedc5b553f408174d4bcd89cd8d
</span></span><span class="line"><span class="cl">	0x2e0eafea64aaf2f53240a16b11a4f250ba74ab9ca5a1a90e6f2a6e92185877d2
</span></span><span class="line"><span class="cl">	0x34f41d22ed8209da379691640cec5bfb8bf9404ad0f7264709b7959d61532343
</span></span><span class="line"><span class="cl">	0x7569ab5ce2d1ca13a0c65ad52cc901dfc186e8ff8800793550b97760cbe34db2
</span></span><span class="line"><span class="cl">	0xcdeef0ffe859fcf96fb52e22a9789295c6f1a94280df9faf0ebb9d52abefb3e7
</span></span><span class="line"><span class="cl">	0x00d6793f3dbdd616351441b9e3da9a0de51370174e0d9383b4aae5c3c9806c2a
</span></span><span class="line"><span class="cl">	0xff3daf63a431af021351d3da5f2f39a894352328d7f3df96afab1888f5a7093f
</span></span><span class="line"><span class="cl">	0x7938399bee5293c384831c8e5aa698cdb491d568f9ebfb6d5c946f4ef7bf7e51
</span></span><span class="line"><span class="cl">	0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0
</span></span><span class="line"><span class="cl">	0x0435d78a1b62484fbe3a7680d68ba4bdf0d692f087f4a6b70eb377421c58a5dd
</span></span><span class="line"><span class="cl">	0xe16d1fa4d60cca7447850337c63cdf7b888318cc1bbb893b115f262dc01132d7
</span></span><span class="line"><span class="cl">	0x44af4f696dcfedee682d7e511ad2469780443052565eea731b86b652a175c05e
</span></span><span class="line"><span class="cl">	0xe88732f92ac376efb6e7517e66fc586447e0d065b8686556f2c1a7c3b7a519ce
</span></span><span class="line"><span class="cl">	0x7ee890b096e97fc0c7e3cf74e0f0402532e0f3b8fa0e0c494d3d691d031f57e7
</span></span><span class="line"><span class="cl">	...<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="äº¤æ˜“ç›¸å…³">äº¤æ˜“ç›¸å…³</h2>
<h3 id="æŸ¥è¯¢äº¤æ˜“">æŸ¥è¯¢äº¤æ˜“</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># è·Ÿethersjsä¸­çš„ provider.getTransaction ç±»ä¼¼</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cast tx &lt;HASH&gt; [FIELD] --rpc-url=$RPC</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># è·Ÿethersjsä¸­çš„ provider.getTransactionReceiptç±»ä¼¼</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cast receipt &lt;HASH&gt; [FIELD] --rpc-url=$RPC </span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast tx 0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0 --rpc-url<span class="o">=</span><span class="nv">$RPC</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast receipt 0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0 --rpc-url<span class="o">=</span><span class="nv">$RPC</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åªè·å–logs</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast receipt 0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0 logs --rpc-url<span class="o">=</span><span class="nv">$RPC</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸€æ¡å‘½ä»¤è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">blockHash            0x016e71f4130bac96a20761acbc0ba82a77c26f85513f1661adfd406d1c809543
</span></span><span class="line"><span class="cl">blockNumber          <span class="m">15769241</span>
</span></span><span class="line"><span class="cl">from                 0x9C0649d7325990D98375F7864eA167B5EAdCD46a
</span></span><span class="line"><span class="cl">gas                  <span class="m">313863</span>
</span></span><span class="line"><span class="cl">gasPrice             <span class="m">35000000000</span>
</span></span><span class="line"><span class="cl"><span class="nb">hash</span>                 0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0
</span></span><span class="line"><span class="cl">input                0x38ed173900000000000000000000000000000000000000000000000332ca1b67940c000000000000000000000000000000000000000000000000000416b4849e6ba1475000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000009c0649d7325990d98375f7864ea167b5eadcd46a00000000000000000000000000000000000000000000000000000000634d91c1000000000000000000000000000000000000000000000000000000000000000200000000000000000000000097be09f2523b39b835da9ea3857cfa1d3c660cbb0000000000000000000000001bbf25e71ec48b84d773809b4ba55b6f4be946fb
</span></span><span class="line"><span class="cl">nonce                <span class="m">14</span>
</span></span><span class="line"><span class="cl">r                    0x288aef25af73a4d1916f8d37107ef5f24729a423f23acc38920829c4180fe794
</span></span><span class="line"><span class="cl">s                    0x7644d26a91da02ff1e774cc821febf6387b8ee9f3e3085140b781819d0d8ede0
</span></span><span class="line"><span class="cl">to                   0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D
</span></span><span class="line"><span class="cl">transactionIndex     <span class="m">10</span>
</span></span><span class="line"><span class="cl">v                    <span class="m">38</span>
</span></span><span class="line"><span class="cl">value                <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒè¡Œå‘½ä»¤è¡Œç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">blockHash               0x016e71f4130bac96a20761acbc0ba82a77c26f85513f1661adfd406d1c809543
</span></span><span class="line"><span class="cl">blockNumber             <span class="m">15769241</span>
</span></span><span class="line"><span class="cl">contractAddress
</span></span><span class="line"><span class="cl">cumulativeGasUsed       <span class="m">805082</span>
</span></span><span class="line"><span class="cl">effectiveGasPrice       <span class="m">35000000000</span>
</span></span><span class="line"><span class="cl">gasUsed                 <span class="m">114938</span>
</span></span><span class="line"><span class="cl">logs                    <span class="o">[{</span><span class="s2">&#34;address&#34;</span>:<span class="s2">&#34;0x97be09f2523b39b835da9ea3857cfa1d3c660cbb&#34;</span>,<span class="s2">&#34;topics&#34;</span>:<span class="o">[</span><span class="s2">&#34;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&#34;</span>,<span class="s2">&#34;0x0000000000000000000000009c0649d7325990d98375f7864ea167b5eadcd46a&#34;</span>,<span class="s2">&#34;0x000000000000000000000000f848e97469538830b0b147152524184a255b9106&#34;</span><span class="o">]</span>,<span class="s2">&#34;data&#34;</span>:<span class="s2">&#34;0x00000000000000000000000000000000000000000000000332ca1b67940c0000&#34;</span>,<span class="s2">&#34;blockHash&#34;</span>:<span class="s2">&#34;0x016e71f4130bac96a20761acbc0ba82a77c26f85513f1661adfd406d1c809543&#34;</span>,<span class="s2">&#34;blockNumber&#34;</span>:<span class="s2">&#34;0xf09e99&#34;</span>,<span class="s2">&#34;transactionHash&#34;</span>:<span class="s2">&#34;0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0&#34;</span>,<span class="s2">&#34;transactionIndex&#34;</span>:<span class="s2">&#34;0xa&#34;</span>,<span class="s2">&#34;logIndex&#34;</span>:<span class="s2">&#34;0x2&#34;</span>,<span class="s2">&#34;removed&#34;</span>:false<span class="o">}</span>,<span class="o">{</span><span class="s2">&#34;address&#34;</span>:<span class="s2">&#34;0x1bbf25e71ec48b84d773809b4ba55b6f4be946fb&#34;</span>,<span class="s2">&#34;topics&#34;</span>:<span class="o">[</span><span class="s2">&#34;0x06b541ddaa720db2b10a4d0cdac39b8d360425fc073085fac19bc82614677987&#34;</span>,<span class="s2">&#34;0x000000000000000000000000f848e97469538830b0b147152524184a255b9106&#34;</span>,<span class="s2">&#34;0x000000000000000000000000f848e97469538830b0b147152524184a255b9106&#34;</span>,<span class="s2">&#34;0x0000000000000000000000009c0649d7325990d98375f7864ea167b5eadcd46a&#34;</span><span class="o">]</span>,<span class="s2">&#34;data&#34;</span>:<span class="s2">&#34;0x0000000000000000000000000000000000000000000000044b0a580cbdcfc0d90000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&#34;</span>,<span class="s2">&#34;blockHash&#34;</span>:<span class="s2">&#34;0x016e71f4130bac96a20761acbc0ba82a77c26f85513f1661adfd406d1c809543&#34;</span>,<span class="s2">&#34;blockNumber&#34;</span>:<span class="s2">&#34;0xf09e99&#34;</span>,<span class="s2">&#34;transactionHash&#34;</span>:<span class="s2">&#34;0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0&#34;</span>,<span class="s2">&#34;transactionIndex&#34;</span>:<span class="s2">&#34;0xa&#34;</span>,<span class="s2">&#34;logIndex&#34;</span>:<span class="s2">&#34;0x3&#34;</span>,<span class="s2">&#34;removed&#34;</span>:false<span class="o">}</span>,<span class="o">{</span><span class="s2">&#34;address&#34;</span>:<span class="s2">&#34;0x1bbf25e71ec48b84d773809b4ba55b6f4be946fb&#34;</span>,<span class="s2">&#34;topics&#34;</span>:<span class="o">[</span><span class="s2">&#34;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&#34;</span>,<span class="s2">&#34;0x000000000000000000000000f848e97469538830b0b147152524184a255b9106&#34;</span>,<span class="s2">&#34;0x0000000000000000000000009c0649d7325990d98375f7864ea167b5eadcd46a&#34;</span><span class="o">]</span>,<span class="s2">&#34;data&#34;</span>:<span class="s2">&#34;0x0000000000000000000000000000000000000000000000044b0a580cbdcfc0d9&#34;</span>,<span class="s2">&#34;blockHash&#34;</span>:<span class="s2">&#34;0x016e71f4130bac96a20761acbc0ba82a77c26f85513f1661adfd406d1c809543&#34;</span>,<span class="s2">&#34;blockNumber&#34;</span>:<span class="s2">&#34;0xf09e99&#34;</span>,<span class="s2">&#34;transactionHash&#34;</span>:<span class="s2">&#34;0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0&#34;</span>,<span class="s2">&#34;transactionIndex&#34;</span>:<span class="s2">&#34;0xa&#34;</span>,<span class="s2">&#34;logIndex&#34;</span>:<span class="s2">&#34;0x4&#34;</span>,<span class="s2">&#34;removed&#34;</span>:false<span class="o">}</span>,<span class="o">{</span><span class="s2">&#34;address&#34;</span>:<span class="s2">&#34;0xf848e97469538830b0b147152524184a255b9106&#34;</span>,<span class="s2">&#34;topics&#34;</span>:<span class="o">[</span><span class="s2">&#34;0x1c411e9a96e071241c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1&#34;</span><span class="o">]</span>,<span class="s2">&#34;data&#34;</span>:<span class="s2">&#34;0x00000000000000000000000000000000000000000000213ebfba613ffdcdd6ad0000000000000000000000000000000000000000000018b4b7f855bdcaac3b14&#34;</span>,<span class="s2">&#34;blockHash&#34;</span>:<span class="s2">&#34;0x016e71f4130bac96a20761acbc0ba82a77c26f85513f1661adfd406d1c809543&#34;</span>,<span class="s2">&#34;blockNumber&#34;</span>:<span class="s2">&#34;0xf09e99&#34;</span>,<span class="s2">&#34;transactionHash&#34;</span>:<span class="s2">&#34;0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0&#34;</span>,<span class="s2">&#34;transactionIndex&#34;</span>:<span class="s2">&#34;0xa&#34;</span>,<span class="s2">&#34;logIndex&#34;</span>:<span class="s2">&#34;0x5&#34;</span>,<span class="s2">&#34;removed&#34;</span>:false<span class="o">}</span>,<span class="o">{</span><span class="s2">&#34;address&#34;</span>:<span class="s2">&#34;0xf848e97469538830b0b147152524184a255b9106&#34;</span>,<span class="s2">&#34;topics&#34;</span>:<span class="o">[</span><span class="s2">&#34;0xd78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822&#34;</span>,<span class="s2">&#34;0x0000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d&#34;</span>,<span class="s2">&#34;0x0000000000000000000000009c0649d7325990d98375f7864ea167b5eadcd46a&#34;</span><span class="o">]</span>,<span class="s2">&#34;data&#34;</span>:<span class="s2">&#34;0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000332ca1b67940c00000000000000000000000000000000000000000000000000044b0a580cbdcfc0d90000000000000000000000000000000000000000000000000000000000000000&#34;</span>,<span class="s2">&#34;blockHash&#34;</span>:<span class="s2">&#34;0x016e71f4130bac96a20761acbc0ba82a77c26f85513f1661adfd406d1c809543&#34;</span>,<span class="s2">&#34;blockNumber&#34;</span>:<span class="s2">&#34;0xf09e99&#34;</span>,<span class="s2">&#34;transactionHash&#34;</span>:<span class="s2">&#34;0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0&#34;</span>,<span class="s2">&#34;transactionIndex&#34;</span>:<span class="s2">&#34;0xa&#34;</span>,<span class="s2">&#34;logIndex&#34;</span>:<span class="s2">&#34;0x6&#34;</span>,<span class="s2">&#34;removed&#34;</span>:false<span class="o">}]</span>
</span></span><span class="line"><span class="cl">logsBloom               0x00200000000000000000000080000000000000000000000000010000000008000000000000800000000000000000000000000000002000000000000000000000000000000000000000000008000000200000000000000000000000400000100000000000800000002000000000000000000000400000000000000010000000000000000000000000005000000000040000000000000000080000004004000000000000084100000000000000000000000000000040000000000000000000040000000002000000000000000000000000000000000000001000002000000020000000000000000000000000000000000000004000000000000000000000000000
</span></span><span class="line"><span class="cl">root
</span></span><span class="line"><span class="cl">status                  <span class="m">1</span>
</span></span><span class="line"><span class="cl">transactionHash         0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0
</span></span><span class="line"><span class="cl">transactionIndex        <span class="m">10</span>
</span></span><span class="line"><span class="cl"><span class="nb">type</span>                    <span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="äº¤æ˜“è§£æ">äº¤æ˜“è§£æ</h3>
<p>Cast ä¼šä» <a href="https://sig.eth.samczsun.com." target="_blank" rel="noopener noreffer ">Ethereum Signature Database</a> è§£æå¯¹åº”çš„æ–¹æ³•åç§°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># cast 4byte &lt;SELECTOR&gt; è§£æäº¤æ˜“çš„åç§°</span>
</span></span><span class="line"><span class="cl">cast 4byte 0x38ed1739
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">swapExactTokensForTokens<span class="o">(</span>uint256,uint256,address<span class="o">[]</span>,address,uint256<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="äº¤æ˜“ç­¾å">äº¤æ˜“ç­¾å</h3>
<blockquote>
<p>ä½¿ç”¨ Keccak-256 èƒ½å¤Ÿè®¡ç®—å‡ºæ–¹æ³•å
å‡½æ•°åä¸ºè¢«è°ƒå‡½æ•°åŸå‹[1]çš„Keccak-256å“ˆå¸Œå€¼çš„å‰4ä¸ªå­—èŠ‚ã€‚è¿™å…è®¸EVMå‡†ç¡®æ— è¯¯åœ°è¯†åˆ«è¢«è°ƒå‡½æ•°ã€‚</p>
</blockquote>
<p>äº¤æ˜“ç­¾åï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># cast sig &lt;SIG&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast sig <span class="s2">&#34;swapExactTokensForTokens(uint256,uint256,address[],address,uint256)&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">0x38ed1739
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰€ä»¥ä½ å¯ä»¥çœ‹åˆ°æœ€ç»ˆéƒ½æ˜¯ <code>0x38ed1739</code></p>
<p>æœ‰äº›æ–¹æ³•åç§°å¯èƒ½æ²¡æœ‰ï¼Œä½ å¯ä»¥é€šè¿‡<code>cast upload-signature &lt;SIG&gt; </code>ä¸Šä¼ ç»™ <a href="https://sig.eth.samczsun.com" target="_blank" rel="noopener noreffer ">Ethereum Signature Database</a></p>
<h3 id="äº¤æ˜“è§£ç ">äº¤æ˜“è§£ç </h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># è·å¾—calldata</span>
</span></span><span class="line"><span class="cl">cast tx 0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0 input --rpc-url<span class="o">=</span><span class="nv">$RPC</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¯ä»¥é€šè¿‡è¯¥æ–¹æ³•decodeäº¤æ˜“çš„æ•°æ®ï¼Œç±»ä¼¼etherscanä¸­çš„decodeæ–¹æ³•</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cast pretty-calldata &lt;CALLDATA&gt;</span>
</span></span><span class="line"><span class="cl">cast pretty-calldata 0x38ed173900000000000000000000000000000000000000000000000332ca1b67940c000000000000000000000000000000000000000000000000000416b4849e6ba1475000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000009c0649d7325990d98375f7864ea167b5eadcd46a00000000000000000000000000000000000000000000000000000000634d91c1000000000000000000000000000000000000000000000000000000000000000200000000000000000000000097be09f2523b39b835da9ea3857cfa1d3c660cbb0000000000000000000000001bbf25e71ec48b84d773809b4ba55b6f4be946fb
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"> Possible methods:
</span></span><span class="line"><span class="cl"> - swapExactTokensForTokens<span class="o">(</span>uint256,uint256,address<span class="o">[]</span>,address,uint256<span class="o">)</span>
</span></span><span class="line"><span class="cl"> ------------
</span></span><span class="line"><span class="cl"> <span class="o">[</span>0<span class="o">]</span>:  00000000000000000000000000000000000000000000000332ca1b67940c0000
</span></span><span class="line"><span class="cl"> <span class="o">[</span>1<span class="o">]</span>:  00000000000000000000000000000000000000000000000416b4849e6ba14750
</span></span><span class="line"><span class="cl"> <span class="o">[</span>2<span class="o">]</span>:  00000000000000000000000000000000000000000000000000000000000000a0
</span></span><span class="line"><span class="cl"> <span class="o">[</span>3<span class="o">]</span>:  0000000000000000000000009c0649d7325990d98375f7864ea167b5eadcd46a
</span></span><span class="line"><span class="cl"> <span class="o">[</span>4<span class="o">]</span>:  00000000000000000000000000000000000000000000000000000000634d91c1
</span></span><span class="line"><span class="cl"> <span class="o">[</span>5<span class="o">]</span>:  <span class="m">0000000000000000000000000000000000000000000000000000000000000002</span>
</span></span><span class="line"><span class="cl"> <span class="o">[</span>6<span class="o">]</span>:  00000000000000000000000097be09f2523b39b835da9ea3857cfa1d3c660cbb
</span></span><span class="line"><span class="cl"> <span class="o">[</span>7<span class="o">]</span>:  0000000000000000000000001bbf25e71ec48b84d773809b4ba55b6f4be946fb
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ¨¡æ‹Ÿè¿è¡Œ">æ¨¡æ‹Ÿè¿è¡Œ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl"># Usage: cast run --rpc-url &lt;URL&gt; &lt;TXHASH&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast run 0x20e7dda515f04ea6a787f68689e27bcadbba914184da5336204f3f36771f59f0
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œç»“æœï¼š</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="https://raw.githubusercontent.com/jollysone/Picture-Library/master/blog/202302260022195.png"
        data-srcset="https://raw.githubusercontent.com/jollysone/Picture-Library/master/blog/202302260022195.png, https://raw.githubusercontent.com/jollysone/Picture-Library/master/blog/202302260022195.png 1.5x, https://raw.githubusercontent.com/jollysone/Picture-Library/master/blog/202302260022195.png 2x"
        data-sizes="auto"
        alt="https://raw.githubusercontent.com/jollysone/Picture-Library/master/blog/202302260022195.png"
        title="https://raw.githubusercontent.com/jollysone/Picture-Library/master/blog/202302260022195.png" /></p>
<p>å¯ä»¥åœ¨ç»“æœä¸­çœ‹åˆ°è¿è¡Œæ¶ˆè€—çš„gasï¼Œä»¥åŠæ–¹æ³•é¡ºåºè°ƒç”¨çš„è¿‡ç¨‹ï¼Œä»¥åŠé‡Šæ”¾çš„emitçš„äº‹ä»¶ã€‚é€šè¿‡è¿™ä¸ªå¯ä»¥äº†è§£ä¸€ä¸ªhashçš„å†…åœ¨è¿‡ç¨‹ã€‚ç±»ä¼¼ <a href="https://blocksec.com/" target="_blank" rel="noopener noreffer ">BlockSec Building BlockChain Security Infrastructure</a> å’Œ <a href="https://tenderly.co/" target="_blank" rel="noopener noreffer ">Tenderly | Ethereum Developer Platform</a> å¯ä»¥ç»“åˆä½¿ç”¨ã€‚</p>
<h2 id="è´¦æˆ·ç®¡ç†">è´¦æˆ·ç®¡ç†</h2>
<h3 id="æ–°å»ºè´¦æˆ·">æ–°å»ºè´¦æˆ·</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># æ–°å»ºä¸€ä¸ªè´¦å·</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cast wallet new [OUT_DIR] </span>
</span></span><span class="line"><span class="cl">cast wallet new
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ–°å»ºä¸€ä¸ªkeystoreçš„è´¦å·ï¼Œå¸¦æœ‰å¯†ç </span>
</span></span><span class="line"><span class="cl"><span class="c1"># cast wallet new &lt;PATH&gt;</span>
</span></span><span class="line"><span class="cl">cast wallet new  ~/Downloads
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸€æ¡å‘½ä»¤è¡Œç»“æœè¾“å‡ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Successfully created new keypair.
</span></span><span class="line"><span class="cl">Address: 0xDD20b18E001A80d8b27B8Caa94EeAC884D1c****
</span></span><span class="line"><span class="cl">Private Key: edb4444199bddea91879c0214af27c0c7f99****bf18e46ba4078a39ccdbe0bc
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒæ¡å‘½ä»¤è¡Œç»“æœè¾“å‡ºï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Enter secret:
</span></span><span class="line"><span class="cl">Created new encrypted keystore file: <span class="sb">`</span>/Users/EasyPlux/Downloads/b5832df5-21e9-4959-8c85-969eec9c0***<span class="sb">`</span><span class="se">\n</span>Public Address of the key: 0x58c1C8f6A7D92A9b20A5343949cd624570Ab****
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è´¦æˆ·ç­¾å">è´¦æˆ·ç­¾å</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ä½¿ç”¨ç­¾åï¼Œç¬¬ä¸€ç§è½½å…¥åˆšæ‰ç”Ÿæˆçš„keystoreç§é’¥ï¼Œç¬¬äºŒç§ç›´æ¥è¾“å…¥è‡ªå·±çš„ç§é’¥ã€‚</span>
</span></span><span class="line"><span class="cl">cast wallet sign &lt;MESSAGE&gt; --keystore<span class="o">=</span>&lt;PATH&gt; 
</span></span><span class="line"><span class="cl">cast wallet sign &lt;MESSAGE&gt; -i
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è´¦æˆ·éªŒè¯">è´¦æˆ·éªŒè¯</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cast wallet verify --address &lt;ADDRESS&gt; &lt;MESSAGE&gt; &lt;SIGNATURE&gt; 
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="åˆçº¦äº¤äº’">åˆçº¦äº¤äº’</h2>
<h3 id="è·å–åˆçº¦">è·å–åˆçº¦</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cast etherscan-source &lt;contract address&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast etherscan-source 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2 --etherscan-api-key<span class="o">=</span><span class="s1">&#39;key&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä¸‹è½½åˆçº¦">ä¸‹è½½åˆçº¦</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1">#cast etherscan-source -d &lt;path&gt;</span>
</span></span><span class="line"><span class="cl"><span class="c1"># æˆ‘è¿™é‡Œå·²ç»å°†$WETHçš„åœ°å€å†™å…¥ç¯å¢ƒå˜é‡ï¼Œå¦‚æœæ²¡å†™å…¥çš„ï¼Œå¯ä»¥å†™æˆåˆçº¦åœ°å€</span>
</span></span><span class="line"><span class="cl">cast etherscan-source <span class="nv">$WETH</span> -d ~/Downloads
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è°ƒç”¨åˆçº¦">è°ƒç”¨åˆçº¦</h3>
<p>è°ƒç”¨ WETHåˆçº¦çš„<code>balanceOf</code>æ–¹æ³•,æŸ¥çœ‹<code>0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2</code>è´¦å·çš„ä½™é¢</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1">#cast call [OPTIONS] [TO] [SIG] [ARGS]... [COMMAND] --rpc-url=$RPC</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast call <span class="nv">$WETH</span> <span class="s2">&#34;balanceOf(address)&#34;</span> 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2 --rpc-url<span class="o">=</span><span class="nv">$RPC</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># è¾“å‡º</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 0x0000000000000000000000000000000000000000000000230d12770f2845219c</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ ¼å¼åŒ–è¾“å‡º åœ¨å‚æ•°åé¢åŠ ä¸€ä¸ªè¿”å›å€¼çš„æ ¼å¼</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast call <span class="nv">$WETH</span> <span class="s2">&#34;balanceOf(address)(uint256)&#34;</span> 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2 --rpc-url<span class="o">=</span><span class="nv">$RPC</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># è¾“å‡º</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 646577988758891995548</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è§£æabi">è§£æABI</h3>
<p>å¯ä»¥æ ¹æ®ABIåå‘è§£æå‡ºsolidityä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># cast interface [OPTIONS] &lt;PATH_OR_ADDRESS&gt;</span>
</span></span><span class="line"><span class="cl">cast interface ./weth.abi
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ç¼–ç è§£ç ">ç¼–ç è§£ç </h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cast --to-hex 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast --to-dec 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast --to-unit 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast --to-wei 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast --to-rlp 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">cast --from-rlp
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="tips">Tips</h2>
<h3 id="è®¾ç½®eth_prc_url">è®¾ç½®ETH_PRC_URL</h3>
<p>å°†ç¯å¢ƒå˜é‡çš„<code>ETH_PRC_URL</code>è®¾ç½®ä¸º <code>--rpc-url</code> ä½ å°±ä¸éœ€è¦åœ¨æ¯ä¸ªå‘½ä»¤è¡Œåé¢å¢åŠ   <code>--rpc-url=$RPC_MAIN</code>  æˆ‘è¿™é‡Œç›´æ¥è®¾ç½®ä¸ºä¸»ç½‘</p>
<h3 id="è®¾ç½®etherscan_api_key">è®¾ç½®ETHERSCAN_API_KEY</h3>
<p>è®¾ç½®<code>ETHERSCAN_API_KEY</code>ç¯å¢ƒå˜é‡å¯ä»¥ç›´æ¥ä»£æ›¿ <code>--etherscan-api-key</code></p>
<h3 id="jsonæ ¼å¼åŒ–">JSONæ ¼å¼åŒ–</h3>
<p>åŠ ä¸Š <code>--json</code>  å¯ä»¥æ ¼å¼åŒ–è¾“å‡º</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">cast block <span class="m">15769241</span> --json --rpc-url<span class="o">=</span><span class="nv">$RPC_MAIN</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="anvilæœ¬åœ°èŠ‚ç‚¹çš„ä½¿ç”¨">Anvilæœ¬åœ°èŠ‚ç‚¹çš„ä½¿ç”¨</h2>
<h3 id="åŸºæœ¬å‘½ä»¤è¡Œ">åŸºæœ¬å‘½ä»¤è¡Œ</h3>
<p>anvil è·Ÿ hardhat è¿˜æœ‰ truffleä¸­çš„ganacheéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ˜¯ä¸€ä¸ªæœ¬åœ°çš„ethèŠ‚ç‚¹ï¼ŒåŒæ ·æ‹¥æœ‰å„ç§forkçš„åŠŸèƒ½ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anvil 
</span></span><span class="line"><span class="cl">anvil --accounts<span class="o">=</span>&lt;NUM&gt; --balance<span class="o">=</span>&lt;NUM&gt; 
</span></span><span class="line"><span class="cl">anvil --mnemonic<span class="o">=</span>&lt;MNEMONIC&gt; 
</span></span><span class="line"><span class="cl">anvil --fork-url<span class="o">=</span><span class="nv">$RPC</span> --fork-block-number<span class="o">=</span>&lt;BLOCK&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="prcçš„ä½¿ç”¨">PRCçš„ä½¿ç”¨</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">anvil_* -&gt; hardhat_* 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">anvil_impersonateAccount 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">anvil_setStorageAt
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="forgeå‘½ä»¤è¡Œè¿›é˜¶çš„ä½¿ç”¨">Forgeå‘½ä»¤è¡Œè¿›é˜¶çš„ä½¿ç”¨</h2>
<p>ä»£ç å­˜æ”¾åœ¨<code>WTFSolidity/Topics/Tools/TOOL07_Foundry/hello_wtf</code></p>
<p>ä»£ç ç›®å½•æ ‘å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">â”œâ”€â”€ broadcast
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ Counter.s.sol 
</span></span><span class="line"><span class="cl">â”œâ”€â”€ foundry.toml        <span class="c1"># foundryé…ç½®æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">â”œâ”€â”€ lib
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ forge-std
</span></span><span class="line"><span class="cl">â”œâ”€â”€ node_modules        <span class="c1"># ä½¿ç”¨npmä¾èµ–åŒ…ç›®å½•ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨forge install</span>
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ @openzeppelin
</span></span><span class="line"><span class="cl">â”œâ”€â”€ package-lock.json
</span></span><span class="line"><span class="cl">â”œâ”€â”€ package.json
</span></span><span class="line"><span class="cl">â”œâ”€â”€ script
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ Counter.s.sol   <span class="c1"># è„šæœ¬åˆçº¦</span>
</span></span><span class="line"><span class="cl">â”œâ”€â”€ src
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ Counter.sol
</span></span><span class="line"><span class="cl">â””â”€â”€ <span class="nb">test</span>
</span></span><span class="line"><span class="cl">    â”œâ”€â”€ Counter.t.sol
</span></span><span class="line"><span class="cl">    â””â”€â”€ Test.t.sol      <span class="c1"># æµ‹è¯•åˆçº¦</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åˆå§‹åŒ–é¡¹ç›®">åˆå§‹åŒ–é¡¹ç›®</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">forge init &lt;dir_name&gt; 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">forge init --template &lt;template_path&gt; &lt;dir_name&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="çƒ­æ›´æ–°">çƒ­æ›´æ–°</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">forge build -w
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æµ‹è¯•">æµ‹è¯•</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># ä¸‰ä¸ªvä¼šç°å®è¯¦ç»†çš„logä¿¡æ¯</span>
</span></span><span class="line"><span class="cl">forge <span class="nb">test</span> -vvv
</span></span><span class="line"><span class="cl"><span class="c1"># çƒ­æ›´æ–°æ¨¡å¼</span>
</span></span><span class="line"><span class="cl">forge <span class="nb">test</span> -vvv -w
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># logæ‰“å° éœ€è¦ - vv 2ä¸ªvä»¥ä¸Šæ‰å¯ä»¥</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ console2.log(&ldquo;test&rdquo;) æ¥æ‰“å°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">testSetNumber</span><span class="p">(</span><span class="nx">uint256</span> <span class="nx">x</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;testNumber: %s==============&#34;</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">counter</span><span class="p">.</span><span class="nx">setNumber</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">assertEq</span><span class="p">(</span><span class="nx">counter</span><span class="p">.</span><span class="nx">number</span><span class="p">(),</span> <span class="nx">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨ emit log æ¥æ‰“å°</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">testNumberIs42</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">emit</span> <span class="nx">log</span><span class="p">(</span><span class="s2">&#34;test&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">assertEq</span><span class="p">(</span><span class="nx">testNumber</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ”¹å˜çŠ¶æ€</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">testCheatCode</span><span class="p">()</span><span class="kr">public</span>
</span></span><span class="line"><span class="cl"><span class="nx">console2</span><span class="p">.</span><span class="nx">Log</span><span class="p">(</span><span class="s2">&#34;before:&#34;</span><span class="nx">block</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">vm</span><span class="p">.</span><span class="nx">warp</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;after:&#34;</span><span class="nx">block</span><span class="p">.</span><span class="nx">timestamp</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ”¹å˜msg.sender ã€å¯ä»¥æ¨¡æ‹Ÿç®¡ç†å‘˜è´¦æˆ·ã€‘</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// åªæœ‰ç¬¬ä¸€æ¬¡æœ‰å½±å“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">vm</span><span class="p">.</span><span class="nx">prank</span><span class="p">(</span><span class="nx">address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å¤šæ¬¡å½±å“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">vm</span><span class="p">.</span><span class="nx">startPrank</span><span class="p">(</span><span class="nx">address</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">...</span><span class="nx">code</span>
</span></span><span class="line"><span class="cl"><span class="nx">vm</span><span class="p">.</span><span class="nx">stopPrank</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ”¹å˜å­˜å‚¨çŠ¶æ€</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">testCheatCode</span><span class="p">()</span><span class="kr">public</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">console2</span><span class="p">.</span><span class="nx">Log</span><span class="p">(</span><span class="s2">&#34;before:&#34;</span><span class="nx">alice</span><span class="p">.</span><span class="nx">balance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="nx">vm</span><span class="p">.</span><span class="nx">deal</span><span class="p">(</span><span class="nx">alice</span><span class="p">,</span><span class="mi">1</span> <span class="nx">ether</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">	<span class="nx">console2</span><span class="p">.</span><span class="nx">Log</span><span class="p">(</span><span class="s2">&#34;after:&#34;</span><span class="nx">alice</span><span class="p">.</span><span class="nx">balance</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å®‰è£…æ’ä»¶">å®‰è£…æ’ä»¶</h2>
<h3 id="ä½¿ç”¨forgeå®‰è£…æ’ä»¶">ä½¿ç”¨forgeå®‰è£…æ’ä»¶</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">forge install <span class="o">[</span>OPTIONS<span class="o">]</span> &lt;github username&gt;/&lt;github project&gt;@&lt;tag&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä½¿ç”¨npmå®‰è£…æ’ä»¶">ä½¿ç”¨npmå®‰è£…æ’ä»¶</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">npm init -y
</span></span><span class="line"><span class="cl">npm i @openzeppelin/contracts 
</span></span><span class="line"><span class="cl">// yarn add @openzeppelin/contracts
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®‰è£…å®Œæˆä¹‹åéœ€è¦é…ç½®<code>foundry.toml</code>æ–¹æ³•ï¼Œåœ¨libsä¸­æ·»åŠ  <code>node_modules</code>æ–‡ä»¶å¤¹ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-toml" data-lang="toml"><span class="line"><span class="cl"><span class="p">[</span><span class="nx">profile</span><span class="p">.</span><span class="nx">default</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">src</span> <span class="p">=</span> <span class="s1">&#39;src&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nx">out</span> <span class="p">=</span> <span class="s1">&#39;out&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nx">libs</span> <span class="p">=</span> <span class="p">[</span><span class="s1">&#39;lib&#39;</span><span class="p">,</span><span class="s1">&#39;node_modules&#39;</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æµ‹è¯•ä¸€">æµ‹è¯•ä¸€</h2>
<p>æ–°å»º<code>test/Test.t.sol</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// SPDX-License-Identifier: SEE LICENSE IN LICENSE
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">13</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;forge-std/Test.sol&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;../src/Counter.sol&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å¯¼å…¥IERC20çš„æ¥å£ï¼Œé€šè¿‡è¯¥æ¥å£å¯ä»¥è°ƒç”¨å¯¹åº”çš„æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span><span class="nx">IERC20</span><span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;@openzeppelin/contracts/token/ERC20/IERC20.sol&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">contract</span> <span class="nx">IERC20Test</span> <span class="nx">is</span> <span class="nx">Test</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜Counteråˆçº¦å¯¹è±¡å˜é‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">Counter</span> <span class="kr">public</span> <span class="nx">counter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜ä¸€ä¸ªåœ°å€å˜é‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">address</span> <span class="kr">public</span> <span class="nx">alice</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜ä¸€ä¸ªmsgSender
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">address</span> <span class="kr">public</span> <span class="nx">msgSender</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜å¸®åŠ©åˆçº¦å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">Helper</span> <span class="kr">public</span> <span class="nx">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//å®šä¹‰ä¸€ä¸ªIERC20 åˆçº¦å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">IERC20</span> <span class="kr">public</span> <span class="nx">dai</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">setUp</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// newæµ‹è¯•åˆçº¦å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">counter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Counter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è°ƒç”¨å¯¹è±¡æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">counter</span><span class="p">.</span><span class="nx">setNumber</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// new helperå¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">h</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Helper</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">alice</span> <span class="o">=</span> <span class="nx">address</span><span class="p">(</span><span class="mi">10086</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">alice</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">dai</span> <span class="o">=</span> <span class="nx">IERC20</span><span class="p">(</span><span class="mh">0x6B175474E89094C44Da98b954EedeAC495271d0F</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æµ‹è¯•ç»™åˆçº¦åœ°å€è½¬è´¦
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">testCheatCode</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;before:&#34;</span><span class="p">,</span> <span class="nx">dai</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">alice</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="nx">deal</span><span class="p">(</span><span class="nx">address</span><span class="p">(</span><span class="nx">dai</span><span class="p">),</span> <span class="nx">alice</span><span class="p">,</span><span class="mi">1</span> <span class="nx">ether</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;after:&#34;</span><span class="p">,</span> <span class="nx">dai</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">alice</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æµ‹è¯•æ”¹å˜åˆçº¦msg.sender
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">testCheatAddress</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;before:&#34;</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">whoCalled</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="nx">vm</span><span class="p">.</span><span class="nx">prank</span><span class="p">(</span><span class="nx">address</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;after:&#34;</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">whoCalled</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">contract</span> <span class="nx">Helper</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">whoCalled</span><span class="p">()</span> <span class="kr">public</span> <span class="nx">view</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">address</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿è¡Œæµ‹è¯•ï¼š</p>
<p>å› ä¸ºæœ¬åœ°æ²¡æœ‰daiçš„éƒ¨ç½²åˆçº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥forkä¸»ç½‘ï¼Œ -vvvå¯ä»¥ç°å®console2.logï¼Œ-wè¡¨ç¤ºwatchæ¨¡å¼ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">forge <span class="nb">test</span> -vvv --fork-url<span class="o">=</span><span class="nv">$ETH_RPC_URL</span> -w
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¾“å‡ºç»“æœï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">Running <span class="m">2</span> tests <span class="k">for</span> test/Test.t.sol:IERC20Test
</span></span><span class="line"><span class="cl"><span class="o">[</span>PASS<span class="o">]</span> testCheatAddress<span class="o">()</span> <span class="o">(</span>gas: 12873<span class="o">)</span>
</span></span><span class="line"><span class="cl">Logs:
</span></span><span class="line"><span class="cl">  0x0000000000000000000000000000000000002766
</span></span><span class="line"><span class="cl">  before: 0xb4c79daB8f259C7Aee6E5b2Aa729821864227e84
</span></span><span class="line"><span class="cl">  after: 0x0000000000000000000000000000000000000001
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>PASS<span class="o">]</span> testCheatCode<span class="o">()</span> <span class="o">(</span>gas: 153596<span class="o">)</span>
</span></span><span class="line"><span class="cl">Logs:
</span></span><span class="line"><span class="cl">  0x0000000000000000000000000000000000002766
</span></span><span class="line"><span class="cl">  before: <span class="m">0</span>
</span></span><span class="line"><span class="cl">  after: <span class="m">1000000000000000000</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Test result: ok. <span class="m">2</span> passed<span class="p">;</span> <span class="m">0</span> failed<span class="p">;</span> finished in 5.61s
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä»£ç ä¸­forkç½‘ç»œ">ä»£ç ä¸­forkç½‘ç»œ</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">testCodeFork</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">address</span><span class="p">(</span><span class="nx">dai</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="nx">string</span> <span class="nx">memory</span> <span class="nx">rpc</span> <span class="o">=</span> <span class="nx">vm</span><span class="p">.</span><span class="nx">envString</span><span class="p">(</span><span class="s2">&#34;ETH_RPC_URL&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">uint256</span> <span class="nx">mainnet</span> <span class="o">=</span> <span class="nx">vm</span><span class="p">.</span><span class="nx">createFork</span><span class="p">(</span><span class="nx">rpc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">vm</span><span class="p">.</span><span class="nx">selectFork</span><span class="p">(</span><span class="nx">mainnet</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¿™è¾¹ä¸‹é¢å¼€å§‹å°±æ˜¯ç›´æ¥forkç½‘ç»œäº†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;before:&#34;</span><span class="p">,</span><span class="nx">dai</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">alice</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="nx">deal</span><span class="p">(</span><span class="nx">address</span><span class="p">(</span><span class="nx">dai</span><span class="p">),</span><span class="nx">alice</span><span class="p">,</span><span class="mi">1</span> <span class="nx">ether</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;after:&#34;</span><span class="p">,</span><span class="nx">dai</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">alice</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä»ä»£ç ä¸­è¯»å–ç¯å¢ƒå˜é‡">ä»ä»£ç ä¸­è¯»å–ç¯å¢ƒå˜é‡</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// é€šè¿‡ vm.envAddress è·å–ç¯å¢ƒå˜é‡ä¸­çš„åœ°å€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">dai</span> <span class="o">=</span> <span class="nx">IERC20</span><span class="p">(</span><span class="nx">vm</span><span class="p">.</span><span class="nx">envAddress</span><span class="p">(</span><span class="s2">&#34;DAI&#34;</span><span class="p">));</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å®Œæ•´ä»£ç ">å®Œæ•´ä»£ç </h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// SPDX-License-Identifier: SEE LICENSE IN LICENSE
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">13</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;forge-std/Test.sol&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;../src/Counter.sol&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="c1">// å¯¼å…¥IERC20çš„æ¥å£ï¼Œé€šè¿‡è¯¥æ¥å£å¯ä»¥è°ƒç”¨å¯¹åº”çš„æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">import</span> <span class="p">{</span><span class="nx">IERC20</span><span class="p">}</span> <span class="nx">from</span> <span class="s2">&#34;@openzeppelin/contracts/token/ERC20/IERC20.sol&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">contract</span> <span class="nx">IERC20Test</span> <span class="nx">is</span> <span class="nx">Test</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜Counteråˆçº¦å¯¹è±¡å˜é‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">Counter</span> <span class="kr">public</span> <span class="nx">counter</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜ä¸€ä¸ªåœ°å€å˜é‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">address</span> <span class="kr">public</span> <span class="nx">alice</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜ä¸€ä¸ªmsgSender
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">address</span> <span class="kr">public</span> <span class="nx">msgSender</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// å£°æ˜å¸®åŠ©åˆçº¦å‡½æ•°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">Helper</span> <span class="kr">public</span> <span class="nx">h</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">//å®šä¹‰ä¸€ä¸ªIERC20 åˆçº¦å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">IERC20</span> <span class="kr">public</span> <span class="nx">dai</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">setUp</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// newæµ‹è¯•åˆçº¦å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">counter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Counter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è°ƒç”¨å¯¹è±¡æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">counter</span><span class="p">.</span><span class="nx">setNumber</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// new helperå¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">h</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Helper</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">alice</span> <span class="o">=</span> <span class="nx">address</span><span class="p">(</span><span class="mi">10086</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">alice</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// é€šè¿‡ vm.envAddress è·å–ç¯å¢ƒå˜é‡ä¸­çš„åœ°å€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">dai</span> <span class="o">=</span> <span class="nx">IERC20</span><span class="p">(</span><span class="nx">vm</span><span class="p">.</span><span class="nx">envAddress</span><span class="p">(</span><span class="s2">&#34;DAI&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// æµ‹è¯•ç»™åˆçº¦åœ°å€è½¬è´¦
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">testCheatCode</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;before:&#34;</span><span class="p">,</span> <span class="nx">dai</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">alice</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="nx">deal</span><span class="p">(</span><span class="nx">address</span><span class="p">(</span><span class="nx">dai</span><span class="p">),</span> <span class="nx">alice</span><span class="p">,</span><span class="mi">1</span> <span class="nx">ether</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;after:&#34;</span><span class="p">,</span> <span class="nx">dai</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">alice</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æµ‹è¯•æ”¹å˜åˆçº¦msg.sender
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kd">function</span> <span class="nx">testCheatAddress</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;before:&#34;</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">whoCalled</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="nx">vm</span><span class="p">.</span><span class="nx">prank</span><span class="p">(</span><span class="nx">address</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;after:&#34;</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">whoCalled</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">testCodeFork</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">address</span><span class="p">(</span><span class="nx">dai</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="nx">string</span> <span class="nx">memory</span> <span class="nx">rpc</span> <span class="o">=</span> <span class="nx">vm</span><span class="p">.</span><span class="nx">envString</span><span class="p">(</span><span class="s2">&#34;ETH_RPC_URL&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">uint256</span> <span class="nx">mainnet</span> <span class="o">=</span> <span class="nx">vm</span><span class="p">.</span><span class="nx">createFork</span><span class="p">(</span><span class="nx">rpc</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">vm</span><span class="p">.</span><span class="nx">selectFork</span><span class="p">(</span><span class="nx">mainnet</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// è¿™è¾¹ä¸‹é¢å¼€å§‹å°±æ˜¯ç›´æ¥forkç½‘ç»œäº†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;before:&#34;</span><span class="p">,</span><span class="nx">dai</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">alice</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="nx">deal</span><span class="p">(</span><span class="nx">address</span><span class="p">(</span><span class="nx">dai</span><span class="p">),</span><span class="nx">alice</span><span class="p">,</span><span class="mi">1</span> <span class="nx">ether</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;after:&#34;</span><span class="p">,</span><span class="nx">dai</span><span class="p">.</span><span class="nx">balanceOf</span><span class="p">(</span><span class="nx">alice</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">contract</span> <span class="nx">Helper</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="nx">whoCalled</span><span class="p">()</span> <span class="kr">public</span> <span class="nx">view</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">address</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">msg</span><span class="p">.</span><span class="nx">sender</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="vmsol">vm.sol</h3>
<p><code>vm.sol</code> ä¸­è¿˜æœ‰å¾ˆå¤šå°è£…å¥½çš„æ–¹æ³•å¯ä»¥ç›´æ¥ä½¿ç”¨</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// Sets the *next* call&#39;s msg.sender to be the input address
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">prank</span><span class="p">(</span><span class="nx">address</span><span class="p">)</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Sets all subsequent calls&#39; msg.sender to be the input address until `stopPrank` is called
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">startPrank</span><span class="p">(</span><span class="nx">address</span><span class="p">)</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Sets the *next* call&#39;s msg.sender to be the input address, and the tx.origin to be the second input
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">prank</span><span class="p">(</span><span class="nx">address</span><span class="p">,</span><span class="nx">address</span><span class="p">)</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Sets all subsequent calls&#39; msg.sender to be the input address until `stopPrank` is called, and the tx.origin to be the second input
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">startPrank</span><span class="p">(</span><span class="nx">address</span><span class="p">,</span><span class="nx">address</span><span class="p">)</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Resets subsequent calls&#39; msg.sender to be `address(this)`
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">stopPrank</span><span class="p">()</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Sets an address&#39; balance, (who, newBalance)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">deal</span><span class="p">(</span><span class="nx">address</span><span class="p">,</span> <span class="nx">uint256</span><span class="p">)</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Sets an address&#39; code, (who, newCode)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">etch</span><span class="p">(</span><span class="nx">address</span><span class="p">,</span> <span class="nx">bytes</span> <span class="nx">calldata</span><span class="p">)</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Expects an error on next call
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">expectRevert</span><span class="p">(</span><span class="nx">bytes</span> <span class="nx">calldata</span><span class="p">)</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">function</span> <span class="nx">expectRevert</span><span class="p">(</span><span class="nx">bytes4</span><span class="p">)</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kd">function</span> <span class="nx">expectRevert</span><span class="p">()</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Records all storage reads and writes
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">record</span><span class="p">()</span> <span class="nx">external</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Gets all accessed reads and write slot from a recording session, for a given address
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">accesses</span><span class="p">(</span><span class="nx">address</span><span class="p">)</span> <span class="nx">external</span> <span class="nx">returns</span> <span class="p">(</span><span class="nx">bytes32</span><span class="p">[]</span> <span class="nx">memory</span> <span class="nx">reads</span><span class="p">,</span> <span class="nx">bytes32</span><span class="p">[]</span> <span class="nx">memory</span> <span class="nx">writes</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="è¿è¡Œè„šæœ¬">è¿è¡Œè„šæœ¬</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">forge script <span class="o">[</span>OPTIONS<span class="o">]</span> &lt;PATH&gt; <span class="o">[</span>ARGS<span class="o">]</span>...
</span></span><span class="line"><span class="cl">forge script script/Counter.s.sol:CounterScript
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>script/Counter.s.sol</code> è„šæœ¬ä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="c1">// SPDX-License-Identifier: UNLICENSED
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">pragma</span> <span class="nx">solidity</span> <span class="o">^</span><span class="mf">0.8</span><span class="p">.</span><span class="mi">13</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;forge-std/Script.sol&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">contract</span> <span class="nx">CounterScript</span> <span class="nx">is</span> <span class="nx">Script</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="c1">// æ¯æ¬¡åˆå§‹åŒ–ä¼šè¿è¡Œ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kd">function</span> <span class="nx">setUp</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;setup &#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">function</span> <span class="nx">run</span><span class="p">()</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">vm</span><span class="p">.</span><span class="nx">broadcast</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;run&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kd">function</span> <span class="nx">someFunction</span><span class="p">(</span><span class="nx">uint256</span> <span class="nx">x</span><span class="p">)</span> <span class="kr">public</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&#34;some other func&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="nx">console2</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŒ‡å®šæ–¹æ³•ï¼Œå¸¦å‚æ•°çš„æµ‹è¯•è¿è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">forge script script/Counter.s.sol --sig<span class="o">=</span><span class="s2">&#34;someFunction(uint256 x)&#34;</span> <span class="m">10</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="è„šæœ¬éƒ¨ç½²åˆçº¦">è„šæœ¬éƒ¨ç½²åˆçº¦</h2>
<p>ç¼–å†™éƒ¨ç½²è„šæœ¬ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">// SPDX-License-Identifier: UNLICENSED
</span></span><span class="line"><span class="cl">pragma solidity ^0.8.13<span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">import <span class="s2">&#34;forge-std/Script.sol&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">// å¼•å…¥åˆçº¦
</span></span><span class="line"><span class="cl">import <span class="s2">&#34;../src/Counter.sol&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">contract CounterScript is Script <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">function</span> setUp<span class="o">()</span> public <span class="o">{</span>
</span></span><span class="line"><span class="cl">        console2.log<span class="o">(</span><span class="s2">&#34;setup &#34;</span><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">function</span> run<span class="o">()</span> public <span class="o">{</span>
</span></span><span class="line"><span class="cl">        vm.startBroadcast<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">		//ç”Ÿæˆåˆçº¦å¯¹è±¡
</span></span><span class="line"><span class="cl">        Counter <span class="nv">c</span> <span class="o">=</span> new Counter<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        vm.stopBroadcast<span class="o">()</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æµ‹è¯•éƒ¨ç½²ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">forge script script/Counter.s.sol -vvvv --rpc-url<span class="o">=</span>http://127.0.0.1:8545
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­£å¼éƒ¨ç½²ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">forge script script/Counter.s.sol -vvvv --rpc-url=http://127.0.0.1:8545 --broadcast --private-key=privete_key
</span></span></code></pre></td></tr></table>
</div>
</div><p>éƒ¨ç½²å®Œæˆä¹‹åä¼šå¤šä¸€ä¸ªbroadcastæ–‡ä»¶å¤¹ï¼ŒæŸ¥çœ‹è¯¥æ–‡ä»¶å¤¹æœ‰<code>run-latest.json</code>å¯ä»¥çœ‹åˆ°éƒ¨ç½²çš„ç›¸åº”ä¿¡æ¯ã€‚</p>
<h3 id="éƒ¨ç½²å¤šä¸ªç½‘ç»œ">éƒ¨ç½²å¤šä¸ªç½‘ç»œ</h3>
<p>ä½¿ç”¨forkä»£ç å¯ä»¥éƒ¨ç½²å¤šä¸ªç½‘ç»œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">uint256</span> <span class="nx">mainnet</span> <span class="o">=</span> <span class="nx">vm</span><span class="p">.</span><span class="nx">createFork</span><span class="p">(</span><span class="nx">rpc</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="tips-1">Tipsï¼š</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">forge <span class="nb">test</span> --gas-report
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">forge inspect
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¯¹æ¯”gasæ˜¯å¦å‡å°‘</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">forge snapshot
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">forge snapshot --diff 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># äº¤äº’å¼Debugger</span>
</span></span><span class="line"><span class="cl">forge script script/Counter.s.sol --debug
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># é“¾ä¸Šäº¤æ˜“debugger</span>
</span></span><span class="line"><span class="cl">forge run --debug
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ä»‹ç»äº†ä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·ï¼Œå¹¶ä»‹ç»äº†å¦‚ä½•åˆ©ç”¨Foundryç¼–è¯‘ï¼Œéƒ¨ç½²ï¼Œæµ‹è¯•æ™ºèƒ½åˆçº¦ã€‚ç”±äºFoundryçš„éƒ¨ç½²å’Œæµ‹è¯•è„šæœ¬éƒ½æ˜¯ç”¨Solidityç¼–å†™ï¼Œå…å»äº†å¼€å‘è€…å­¦ä¹ javascriptçš„æ—¶é—´æˆæœ¬ï¼Œå¹¶æä¾›äº†æ›´å¤šç»ƒä¹ Solidityçš„æœºä¼šï¼Œæ¨èå¤§å®¶ä½¿ç”¨ã€‚</p>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<p><a href="https://www.youtube.com/watch?v=EXYeltwvftw" target="_blank" rel="noopener noreffer ">ä½¿ç”¨ foundry æ¡†æ¶åŠ é€Ÿæ™ºèƒ½åˆçº¦å¼€å‘</a></p>
<p><a href="https://book.getfoundry.sh/reference/cast/" target="_blank" rel="noopener noreffer ">cast Commands - Foundry Book</a></p>
<p><a href="https://twitter.com/wp__lai" target="_blank" rel="noopener noreffer ">https://twitter.com/wp__lai</a></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2022-06-19</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://blog.webhooks.top/posts/tools-foundry-introduce.html" data-title="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…" data-via="jollysone" data-hashtags="tools"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://blog.webhooks.top/posts/tools-foundry-introduce.html" data-hashtag="tools"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Linkedin" data-sharer="linkedin" data-url="https://blog.webhooks.top/posts/tools-foundry-introduce.html"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° WhatsApp" data-sharer="whatsapp" data-url="https://blog.webhooks.top/posts/tools-foundry-introduce.html" data-title="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Hacker News" data-sharer="hackernews" data-url="https://blog.webhooks.top/posts/tools-foundry-introduce.html" data-title="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://blog.webhooks.top/posts/tools-foundry-introduce.html" data-title="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://blog.webhooks.top/posts/tools-foundry-introduce.html" data-title="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="https://blog.webhooks.top/posts/tools-foundry-introduce.html" data-title="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…"><i class="fab fa-evernote fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Skype" data-sharer="skype" data-url="https://blog.webhooks.top/posts/tools-foundry-introduce.html" data-title="Foundryï¼Œä»¥Solidityä¸ºä¸­å¿ƒçš„å¼€å‘å·¥å…·åŒ…"><i class="fab fa-skype fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/tools.html">tools</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/tools-hardhat-introduce.html" class="prev" rel="prev" title="Hardhatä»¥å¤ªåŠå¼€å‘ç¯å¢ƒ"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Hardhatä»¥å¤ªåŠå¼€å‘ç¯å¢ƒ</a>
            <a href="/posts/solidity-smart-contract-security-re-entrancy.html" class="next" rel="next" title="åˆçº¦å®‰å…¨ï¼šé‡å…¥æ”»å‡»">åˆçº¦å®‰å…¨ï¼šé‡å…¥æ”»å‡»<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="valine" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://valine.js.org/">Valine</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">è½¬è½½è¯·æ³¨æ˜å‡ºå¤„</div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2018 - 2023</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/valine/valine.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/valine@1.5.0/dist/Valine.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":50},"comment":{"valine":{"appId":"QGzwQXOqs5JOhN4RGPOkR2mR-MdYXbMMI","appKey":"WBmoGyJtbqUswvfLh6L8iEBr","avatar":"mp","el":"#valine","emojiCDN":"https://cdn.jsdelivr.net/npm/emoji-datasource-google@14.0.0/img/google/64/","emojiMaps":{"100":"1f4af.png","alien":"1f47d.png","anger":"1f4a2.png","angry":"1f620.png","anguished":"1f627.png","astonished":"1f632.png","black_heart":"1f5a4.png","blue_heart":"1f499.png","blush":"1f60a.png","bomb":"1f4a3.png","boom":"1f4a5.png","broken_heart":"1f494.png","brown_heart":"1f90e.png","clown_face":"1f921.png","cold_face":"1f976.png","cold_sweat":"1f630.png","confounded":"1f616.png","confused":"1f615.png","cry":"1f622.png","crying_cat_face":"1f63f.png","cupid":"1f498.png","dash":"1f4a8.png","disappointed":"1f61e.png","disappointed_relieved":"1f625.png","dizzy":"1f4ab.png","dizzy_face":"1f635.png","drooling_face":"1f924.png","exploding_head":"1f92f.png","expressionless":"1f611.png","face_vomiting":"1f92e.png","face_with_cowboy_hat":"1f920.png","face_with_hand_over_mouth":"1f92d.png","face_with_head_bandage":"1f915.png","face_with_monocle":"1f9d0.png","face_with_raised_eyebrow":"1f928.png","face_with_rolling_eyes":"1f644.png","face_with_symbols_on_mouth":"1f92c.png","face_with_thermometer":"1f912.png","fearful":"1f628.png","flushed":"1f633.png","frowning":"1f626.png","ghost":"1f47b.png","gift_heart":"1f49d.png","green_heart":"1f49a.png","grimacing":"1f62c.png","grin":"1f601.png","grinning":"1f600.png","hankey":"1f4a9.png","hear_no_evil":"1f649.png","heart":"2764-fe0f.png","heart_decoration":"1f49f.png","heart_eyes":"1f60d.png","heart_eyes_cat":"1f63b.png","heartbeat":"1f493.png","heartpulse":"1f497.png","heavy_heart_exclamation_mark_ornament":"2763-fe0f.png","hole":"1f573-fe0f.png","hot_face":"1f975.png","hugging_face":"1f917.png","hushed":"1f62f.png","imp":"1f47f.png","innocent":"1f607.png","japanese_goblin":"1f47a.png","japanese_ogre":"1f479.png","joy":"1f602.png","joy_cat":"1f639.png","kiss":"1f48b.png","kissing":"1f617.png","kissing_cat":"1f63d.png","kissing_closed_eyes":"1f61a.png","kissing_heart":"1f618.png","kissing_smiling_eyes":"1f619.png","laughing":"1f606.png","left_speech_bubble":"1f5e8-fe0f.png","love_letter":"1f48c.png","lying_face":"1f925.png","mask":"1f637.png","money_mouth_face":"1f911.png","nauseated_face":"1f922.png","nerd_face":"1f913.png","neutral_face":"1f610.png","no_mouth":"1f636.png","open_mouth":"1f62e.png","orange_heart":"1f9e1.png","partying_face":"1f973.png","pensive":"1f614.png","persevere":"1f623.png","pleading_face":"1f97a.png","pouting_cat":"1f63e.png","purple_heart":"1f49c.png","rage":"1f621.png","relaxed":"263a-fe0f.png","relieved":"1f60c.png","revolving_hearts":"1f49e.png","right_anger_bubble":"1f5ef-fe0f.png","robot_face":"1f916.png","rolling_on_the_floor_laughing":"1f923.png","scream":"1f631.png","scream_cat":"1f640.png","see_no_evil":"1f648.png","shushing_face":"1f92b.png","skull":"1f480.png","skull_and_crossbones":"2620-fe0f.png","sleeping":"1f634.png","sleepy":"1f62a.png","slightly_frowning_face":"1f641.png","slightly_smiling_face":"1f642.png","smile":"1f604.png","smile_cat":"1f638.png","smiley":"1f603.png","smiley_cat":"1f63a.png","smiling_face_with_3_hearts":"1f970.png","smiling_imp":"1f608.png","smirk":"1f60f.png","smirk_cat":"1f63c.png","sneezing_face":"1f927.png","sob":"1f62d.png","space_invader":"1f47e.png","sparkling_heart":"1f496.png","speak_no_evil":"1f64a.png","speech_balloon":"1f4ac.png","star-struck":"1f929.png","stuck_out_tongue":"1f61b.png","stuck_out_tongue_closed_eyes":"1f61d.png","stuck_out_tongue_winking_eye":"1f61c.png","sunglasses":"1f60e.png","sweat":"1f613.png","sweat_drops":"1f4a6.png","sweat_smile":"1f605.png","thinking_face":"1f914.png","thought_balloon":"1f4ad.png","tired_face":"1f62b.png","triumph":"1f624.png","two_hearts":"1f495.png","unamused":"1f612.png","upside_down_face":"1f643.png","weary":"1f629.png","white_frowning_face":"2639-fe0f.png","white_heart":"1f90d.png","wink":"1f609.png","woozy_face":"1f974.png","worried":"1f61f.png","yawning_face":"1f971.png","yellow_heart":"1f49b.png","yum":"1f60b.png","zany_face":"1f92a.png","zipper_mouth_face":"1f910.png","zzz":"1f4a4.png"},"enableQQ":false,"highlight":true,"lang":"zh-CN","pageSize":10,"placeholder":"ä½ çš„è¯„è®º ...","recordIP":true,"serverURLs":"https://leancloud.hugoloveit.com","visitor":true}},"data":{"id-1":"5oneXjâ€²s","id-2":"5oneXjâ€²s"},"lightgallery":true,"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":30,"type":"lunr"},"twemoji":true,"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":88}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
